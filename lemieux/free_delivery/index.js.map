{"version":3,"file":"index.js","sources":["../../../src/libraries/index.ts","../../../src/lemieux/free_delivery/free_delivery_banner.css?raw","../../../src/lemieux/free_delivery/threshold_banner.css?raw","../../../src/lemieux/free_delivery/blocks.ts","../../../src/lemieux/free_delivery/index.ts"],"sourcesContent":["declare global {\r\n  interface Window {\r\n    dataLayer: any[]\r\n    Shopify: any\r\n    clarity: any\r\n  }\r\n}\r\n\r\ntype eventType = 'click' | 'visibility' | 'submit' | 'input' | 'change' | 'error' | 'success' | 'other'\r\n\r\nexport const pushData = (name: string, desc: string, type: eventType, loc: string = '') => {\r\n  window.dataLayer = window.dataLayer || []\r\n  window.dataLayer.push({\r\n    event: 'event-to-ga4',\r\n    event_name: name,\r\n    event_desc: desc,\r\n    event_type: type,\r\n    event_loc: loc\r\n  })\r\n  console.log(`Event: ${name} | ${desc} | ${type} | ${loc}`)\r\n}\r\n\r\ninterface StartLog {\r\n  name: string\r\n  dev: string\r\n}\r\n\r\nexport const startLog = ({ name, dev }: StartLog) => {\r\n  console.log(\r\n    `%c EXP: ${name} (DEV: ${dev})`,\r\n    `background: #3498eb; color: #fccf3a; font-size: 20px; font-weight: bold;`\r\n  )\r\n}\r\n\r\nexport const $$el = selector => document.querySelectorAll(selector)\r\nexport const $el = selector => document.querySelector(selector)\r\n\r\n// load list of scripts\r\nexport const loadScriptsOrStyles = async (urls: string[]) => {\r\n  const loadScriptOrStyle = (url: string) => {\r\n    return new Promise((resolve, reject) => {\r\n      // check script by document.scripts\r\n      const type = url.split('.').pop()\r\n      if (type === 'js') {\r\n        const loadedScripts = Array.from(document.scripts).map(script => script.src.toLowerCase())\r\n        if (loadedScripts.includes(url.toLowerCase())) {\r\n          console.log(`Script ${url} allready downloaded!`)\r\n          return resolve('')\r\n        }\r\n        const script = document.createElement('script')\r\n        script.src = url\r\n        script.onload = resolve\r\n        script.onerror = reject\r\n        document.head.appendChild(script)\r\n      } else if (type === 'css') {\r\n        const loadedStyles = Array.from(document.styleSheets).map(style => style.href?.toLowerCase())\r\n        if (loadedStyles.includes(url.toLowerCase())) {\r\n          console.log(`Style ${url} allready downloaded!`)\r\n          return resolve('')\r\n        }\r\n        const style = document.createElement('link')\r\n        style.rel = 'stylesheet'\r\n        style.href = url\r\n        style.onload = resolve\r\n        style.onerror = reject\r\n        document.head.appendChild(style)\r\n      }\r\n    })\r\n  }\r\n\r\n  for (const url of urls) {\r\n    await loadScriptOrStyle(url)\r\n    console.log(`Loaded librari ${url}`)\r\n  }\r\n  console.log('All libraries loaded!')\r\n}\r\n\r\n// clarity\r\nexport const clarityInterval = name => {\r\n  let int = setInterval(function () {\r\n    if (typeof window.clarity == 'function') {\r\n      clearInterval(int)\r\n      window.clarity('set', name, 'variant_1')\r\n    }\r\n  }, 1000)\r\n}\r\n\r\n// visibility element\r\nexport const visibilityOfTime = (\r\n  selector: string | HTMLElement | Element,\r\n  eventName: string,\r\n  visiblePlace: string,\r\n  description?: string,\r\n  time = 3000,\r\n  threshold = 0.5\r\n) => {\r\n  let observer: IntersectionObserver\r\n  let timer: NodeJS.Timeout\r\n\r\n  observer = new IntersectionObserver(\r\n    function (entries) {\r\n      if (entries[0].isIntersecting === true) {\r\n        timer = setTimeout(() => {\r\n          pushData(\r\n            eventName,\r\n            (entries[0].target as HTMLElement).dataset.visible || description || '',\r\n            'visibility',\r\n            visiblePlace\r\n          )\r\n          observer.disconnect()\r\n        }, time)\r\n      } else {\r\n        // console.log('Element is not fully visible')\r\n        clearTimeout(timer) // Clear the timer if the element is not visible\r\n      }\r\n    },\r\n    { threshold: [threshold] }\r\n  )\r\n\r\n  if (typeof selector === 'string') {\r\n    const element = document.querySelector(selector)\r\n\r\n    if (element) {\r\n      observer.observe(element)\r\n    }\r\n  } else {\r\n    observer.observe(selector)\r\n  }\r\n}\r\n// waitForElement\r\nexport function waitForElement(selector: string) {\r\n  return new Promise(resolve => {\r\n    if (document.querySelector(selector)) {\r\n      return resolve(document.querySelector(selector))\r\n    }\r\n\r\n    const observer = new MutationObserver(() => {\r\n      if (document.querySelector(selector)) {\r\n        resolve(document.querySelector(selector))\r\n        observer.disconnect()\r\n      }\r\n    })\r\n\r\n    observer.observe(document.documentElement, {\r\n      childList: true,\r\n      subtree: true,\r\n      characterData: true\r\n    })\r\n  })\r\n}\r\n\r\n// function setupIntersectionObserver(element, callback, threshold = 0.5) {\r\n//   let observer = new IntersectionObserver(\r\n//     function (entries) {\r\n//       if (entries[0].isIntersecting === true) callback()\r\n//       else console.log('Element is not fully visible')\r\n//     },\r\n//     { threshold: [threshold] }\r\n//   )\r\n\r\n//   observer.observe(element)\r\n// }\r\n\r\n// function observeElementWhenAdded(selector) {\r\n//   let mutationObserver = new MutationObserver(function (mutations) {\r\n//     mutations.forEach(function (mutation) {\r\n//       if (mutation.type === 'childList') {\r\n//         let element = document.querySelector(selector)\r\n//         if (element) {\r\n//           setupIntersectionObserver(element)\r\n//         }\r\n//       }\r\n//     })\r\n//   })\r\n\r\n//   mutationObserver.observe(document.body, { childList: true, subtree: true })\r\n// }\r\n","export default \".free_delivery_banner {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  padding: 7px 0px;\\r\\n  background: #202945;\\r\\n\\r\\n  & > div {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n    gap: 6px;\\r\\n\\r\\n    & p {\\r\\n      color: #fff;\\r\\n      font-size: 14px;\\r\\n      font-weight: 600;\\r\\n      line-height: 18px;\\r\\n      text-transform: uppercase;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  & > div:nth-of-type(1) {\\r\\n    padding-right: 16px;\\r\\n    border-right: 1px solid #868c9d;\\r\\n    margin-right: 16px;\\r\\n  }\\r\\n}\\r\\n@media (max-width: 768px) {\\r\\n  .free_delivery_banner {\\r\\n    padding: 7px 15px 7px;\\r\\n\\r\\n    & > div:nth-of-type(1) {\\r\\n      padding-right: 12px;\\r\\n      border-right: 1px solid #868c9d;\\r\\n      margin-right: 12px;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  basket-add-notice .free_delivery_banner {\\r\\n    padding: 3px 10px;\\r\\n  }\\r\\n  basket-add-notice .free_delivery_banner + .b-t {\\r\\n    border: none;\\r\\n  }\\r\\n}\\r\\n\"","export default \".threshold_banner {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  gap: 12px;\\r\\n  background: #eeede9;\\r\\n  padding: 12px 16px;\\r\\n  margin-top: 1.75rem;\\r\\n\\r\\n  & > svg {\\r\\n    max-width: 32px;\\r\\n    width: 100%;\\r\\n    max-height: 32px;\\r\\n    height: 100%;\\r\\n  }\\r\\n\\r\\n  & p {\\r\\n    color: #212121;\\r\\n    font-size: 16px;\\r\\n    font-weight: 400;\\r\\n    line-height: 20px;\\r\\n    letter-spacing: 1px;\\r\\n\\r\\n    & .accent_color_red {\\r\\n      color: #8e1538;\\r\\n      font-weight: 700;\\r\\n    }\\r\\n\\r\\n    & .accent_color_green {\\r\\n      color: #2c7226;\\r\\n      font-weight: 700;\\r\\n    }\\r\\n\\r\\n    & br {\\r\\n      display: none;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  & .crs_progress_bar {\\r\\n    width: 100%;\\r\\n    height: 4px;\\r\\n    background: #fff;\\r\\n    border-radius: 1px;\\r\\n    position: relative;\\r\\n\\r\\n    & .crs_progress_line {\\r\\n      width: 50%;\\r\\n      position: absolute;\\r\\n      height: 4px;\\r\\n      top: 0;\\r\\n      left: 0;\\r\\n      background-color: #2c7226;\\r\\n    }\\r\\n  }\\r\\n}\\r\\nbasket-view .threshold_banner {\\r\\n  margin-top: -0.8rem;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\nbasket-view .threshold_banner.crs_complete {\\r\\n  & p {\\r\\n    line-height: 22px;\\r\\n  }\\r\\n}\\r\\n.crs_progress.threshold_banner {\\r\\n  flex-direction: column;\\r\\n  align-items: flex-start;\\r\\n  gap: 8px;\\r\\n}\\r\\n@media (min-width: 768px) {\\r\\n  minibasket .threshold_banner {\\r\\n    margin: 8px -1.25rem -5px;\\r\\n  }\\r\\n}\\r\\n@media (max-width: 768px) {\\r\\n  .threshold_banner {\\r\\n    margin-top: 16px;\\r\\n    padding: 12px;\\r\\n\\r\\n    & p {\\r\\n      & br {\\r\\n        display: block;\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n  basket-view .threshold_banner {\\r\\n    margin: 0px;\\r\\n    padding: 12px 20px 12px 16px;\\r\\n\\r\\n    & p {\\r\\n      & br {\\r\\n        display: none;\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n  bottom-panel .button,\\r\\n  bottom-panel .button-1 {\\r\\n    border-radius: 2px;\\r\\n    height: 2.5rem;\\r\\n    margin: 0 !important;\\r\\n  }\\r\\n  bottom-panel > div > .wrap {\\r\\n    padding: 12px 16px !important;\\r\\n  }\\r\\n}\\r\\n\"","// @ts-ignore\r\nimport freeDeliveryBannerStyles from './free_delivery_banner.css?raw'\r\n// @ts-ignore\r\nimport thresholdBannerStyles from './threshold_banner.css?raw'\r\n\r\nconst svg = {\r\n  deliveryBox: /* html */ `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\">\r\n      <g clip-path=\"url(#clip0_1214_3284)\">\r\n       <path d=\"M10.4062 1.38208L4.3125 4.42896V6.12492H1.5V7.06242H4.3125V7.99992H0.5V8.93742H4.3125V9.87492H1.5V10.8124H4.3125V11.5709L10.4062 14.6178L16.5 11.5709V4.42896L10.4062 1.38208ZM14.9831 4.71867L10.4062 7.00708L5.82941 4.71867L10.4062 2.43027L14.9831 4.71867ZM5.25 8.93742H6.1875V7.99992H5.25V5.47714L9.9375 7.82089V13.3352L5.25 10.9915V8.93742ZM10.875 13.3352V7.82089L15.5625 5.47714V10.9915L10.875 13.3352Z\" fill=\"white\" />\r\n      </g>\r\n     <defs>\r\n      <clipPath id=\"clip0_1214_3284\">\r\n       <rect width=\"16\" height=\"16\" fill=\"white\" transform=\"translate(0.5)\" />\r\n      </clipPath>\r\n     </defs>\r\n    </svg>\r\n    `,\r\n  deliveryArrows: /* html */ `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"13\" height=\"14\" viewBox=\"0 0 13 14\" fill=\"none\">\r\n     <path d=\"M10.4515 3.6L9.07574 4.97573C8.84144 5.21005 8.84144 5.58996 9.07574 5.82426C9.31004 6.05856 9.68996 6.05856 9.92426 5.82426L12.3243 3.42427C12.5586 3.18995 12.5586 2.81005 12.3243 2.57573L9.92426 0.175734C9.68996 -0.0585782 9.31004 -0.0585782 9.07574 0.175734C8.84144 0.410052 8.84144 0.789948 9.07574 1.02427L10.4515 2.4H3.5C2.70435 2.4 1.94129 2.71607 1.37868 3.27868C0.816068 3.84129 0.5 4.60435 0.5 5.4V6C0.5 6.33138 0.768632 6.6 1.1 6.6C1.43137 6.6 1.7 6.33138 1.7 6V5.4C1.7 4.92261 1.88964 4.46477 2.22721 4.12721C2.56477 3.78964 3.02261 3.6 3.5 3.6H10.4515Z\" fill=\"white\"/>\r\n    <path d=\"M3.92427 8.22485C4.15858 7.99055 4.15858 7.61063 3.92427 7.37633C3.68995 7.14203 3.31005 7.14203 3.07573 7.37633L0.675734 9.77633C0.441422 10.0106 0.441422 10.3905 0.675734 10.6248L3.07573 13.0248C3.31005 13.2591 3.68995 13.2591 3.92427 13.0248C4.15858 12.7905 4.15858 12.4106 3.92427 12.1763L2.54853 10.8006H9.5C10.2957 10.8006 11.0587 10.4845 11.6213 9.92189C12.1839 9.35933 12.5 8.59625 12.5 7.80059V7.20059C12.5 6.86921 12.2314 6.60059 11.9 6.60059C11.5686 6.60059 11.3 6.86921 11.3 7.20059V7.80059C11.3 8.27795 11.1103 8.73581 10.7728 9.07337C10.4352 9.41093 9.97736 9.60059 9.5 9.60059H2.54853L3.92427 8.22485Z\" fill=\"white\"/>\r\n    </svg>\r\n    `,\r\n  packMore: /* html */ `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\">\r\n     <path d=\"M14.5832 23.333H1.54698C0.694158 23.333 0 22.6389 0 21.786V7.5832C0 7.26121 0.26133 6.99988 0.583326 6.99988H22.7497C23.0717 6.99988 23.3331 7.26121 23.3331 7.5832V11.0832C23.3331 11.4052 23.0717 11.6665 22.7497 11.6665C22.4277 11.6665 22.1664 11.4052 22.1664 11.0832V8.16653H1.16665V21.786C1.16665 21.996 1.33698 22.1664 1.54698 22.1664H14.5832C14.9052 22.1664 15.1665 22.4277 15.1665 22.7497C15.1665 23.0717 14.9052 23.333 14.5832 23.333Z\" fill=\"#8E1538\"/>\r\n     <path d=\"M22.7497 8.16657C22.5444 8.16657 22.3449 8.05807 22.2387 7.86441L18.7154 1.46882C18.6139 1.28215 18.4179 1.16665 18.2044 1.16665H5.1286C4.9151 1.16665 4.7191 1.28215 4.6176 1.46882L1.09431 7.86441C0.937981 8.1479 0.580986 8.24707 0.302156 8.09424C0.0198257 7.93907 -0.0828398 7.58324 0.072325 7.30208L3.59562 0.906489C3.90245 0.346496 4.49044 0 5.1286 0H18.2056C18.8438 0 19.4318 0.346496 19.7386 0.905323L23.2607 7.30091C23.417 7.58324 23.3144 7.93791 23.0321 8.09307C22.9422 8.14324 22.8454 8.16657 22.7497 8.16657Z\" fill=\"#8E1538\"/>\r\n     <path d=\"M11.6667 8.16657C11.3447 8.16657 11.0834 7.90524 11.0834 7.58324V0.583326C11.0834 0.26133 11.3447 0 11.6667 0C11.9887 0 12.25 0.26133 12.25 0.583326V7.58324C12.25 7.90524 11.9887 8.16657 11.6667 8.16657Z\" fill=\"#8E1538\"/>\r\n     <path d=\"M18.0831 27.9996C17.7611 27.9996 17.4998 27.7383 17.4998 27.4163V25.083C17.4998 20.9017 20.9017 17.4998 25.083 17.4998H27.4163C27.7383 17.4998 27.9996 17.7611 27.9996 18.0831C27.9996 18.4051 27.7383 18.6664 27.4163 18.6664H25.083C21.5457 18.6664 18.6664 21.5445 18.6664 25.083V27.4163C18.6664 27.7383 18.4051 27.9996 18.0831 27.9996Z\" fill=\"#8E1538\"/>\r\n     <path d=\"M23.3334 22.1665C23.1689 22.1665 23.0068 22.0977 22.8901 21.9623C22.6801 21.7185 22.7093 21.3498 22.9543 21.1398L26.5207 18.082L22.9543 15.0243C22.7093 14.8143 22.6813 14.4468 22.8901 14.2018C23.1024 13.9568 23.4699 13.9299 23.7126 14.1388L27.7959 17.6387C27.9265 17.7507 28 17.9129 28 18.0832C28 18.2535 27.9265 18.4157 27.7959 18.5254L23.7126 22.0253C23.6029 22.1198 23.4676 22.1665 23.3334 22.1665Z\" fill=\"#8E1538\"/>\r\n    </svg>\r\n    `,\r\n  packSuccess: /* html */ `\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\">\r\n     <path d=\"M20.4167 28C16.2354 28 12.8334 24.598 12.8334 20.4167C12.8334 16.2354 16.2354 12.8334 20.4167 12.8334C24.598 12.8334 28 16.2354 28 20.4167C28 24.598 24.598 28 20.4167 28ZM20.4167 14C16.8782 14 14 16.8782 14 20.4167C14 23.9552 16.8782 26.8333 20.4167 26.8333C23.9552 26.8333 26.8333 23.9552 26.8333 20.4167C26.8333 16.8782 23.9552 14 20.4167 14Z\" fill=\"#2C7226\"/>\r\n     <path d=\"M19.2503 23.3333C19.0963 23.3333 18.947 23.2715 18.8373 23.163L16.504 20.8296C16.2765 20.6021 16.2765 20.2323 16.504 20.0048C16.7315 19.7773 17.1013 19.7773 17.3288 20.0048L19.2212 21.8971L22.8938 17.6995C23.1061 17.4557 23.4748 17.4323 23.7175 17.6447C23.9601 17.857 23.9846 18.2257 23.7723 18.4683L19.689 23.135C19.5828 23.2563 19.43 23.3286 19.269 23.3333C19.2632 23.3333 19.2562 23.3333 19.2503 23.3333Z\" fill=\"#2C7226\"/>\r\n     <path d=\"M11.0833 23.3333H1.547C0.694165 23.3333 0 22.6391 0 21.7863V7.58333C0 7.26133 0.261333 7 0.583332 7H22.7499C23.0719 7 23.3333 7.26133 23.3333 7.58333V11.0833C23.3333 11.4053 23.0719 11.6667 22.7499 11.6667C22.4279 11.6667 22.1666 11.4053 22.1666 11.0833V8.16666H1.16666V21.7863C1.16666 21.9963 1.337 22.1666 1.547 22.1666H11.0833C11.4053 22.1666 11.6666 22.428 11.6666 22.75C11.6666 23.072 11.4053 23.3333 11.0833 23.3333Z\" fill=\"#2C7226\"/>\r\n     <path d=\"M22.75 8.16665C22.5446 8.16665 22.3451 8.05815 22.239 7.86448L18.7156 1.46883C18.6141 1.28216 18.4181 1.16666 18.2058 1.16666H5.12752C4.91518 1.16666 4.71918 1.28216 4.61652 1.46883L1.09319 7.86448C0.93686 8.14681 0.584528 8.24948 0.301029 8.09431C0.0198627 7.93915 -0.0828037 7.58331 0.0723626 7.30215L3.59569 0.906498C3.90252 0.346499 4.49052 0 5.12752 0H18.2058C18.8428 0 19.4308 0.346499 19.7376 0.905331L23.261 7.30098C23.4161 7.58331 23.3135 7.93798 23.0311 8.09315C22.9425 8.14331 22.8456 8.16665 22.75 8.16665Z\" fill=\"#2C7226\"/>\r\n     <path d=\"M11.6667 8.16665C11.3447 8.16665 11.0834 7.90531 11.0834 7.58331V0.583332C11.0834 0.261333 11.3447 0 11.6667 0C11.9887 0 12.25 0.261333 12.25 0.583332V7.58331C12.25 7.90531 11.9887 8.16665 11.6667 8.16665Z\" fill=\"#2C7226\"/>\r\n    </svg>\r\n    `,\r\n  headerIcon: /* html */ `\r\n    <svg class=\"header_icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\">\r\n     <path d=\"M30.916 15.2227L27.2122 9.66971C26.9356 9.25029 26.4693 9.00004 25.9652 9.00004H20.5V5.5C20.5 4.67283 19.8272 4 19 4H2.5C1.67283 4 1 4.67283 1 5.5V21.5C1 22.3272 1.67283 23 2.5 23H4.04518C4.28436 24.4166 5.51641 25.5 7 25.5C8.48359 25.5 9.71564 24.4166 9.95482 23H19H22.0452C22.2844 24.4166 23.5164 25.5 25 25.5C26.4836 25.5 27.7156 24.4166 27.9548 23H29.5C30.3272 23 31 22.3272 31 21.5V15.5C31 15.4014 30.9707 15.3047 30.916 15.2227ZM7 24.5C5.89721 24.5 5.00002 23.6028 5.00002 22.5C5.00002 21.3972 5.89727 20.5001 7 20.5001C8.10273 20.5001 8.99998 21.3973 8.99998 22.5C8.99998 23.6028 8.10279 24.5 7 24.5ZM19.5 21.5C19.5 21.7756 19.2756 22 19 22H9.95482C9.71564 20.5834 8.48359 19.5 7 19.5C5.51641 19.5 4.28436 20.5834 4.04518 22H2.5C2.22438 22 2.00002 21.7756 2.00002 21.5V5.5C2.00002 5.22438 2.22438 5.00002 2.5 5.00002H19C19.2756 5.00002 19.5 5.22438 19.5 5.5V21.5ZM25 24.5C23.8972 24.5 23 23.6028 23 22.5C23 21.3972 23.8973 20.5001 25 20.5001C26.1027 20.5001 27 21.3973 27 22.5C27 23.6028 26.1028 24.5 25 24.5ZM30 21.5C30 21.7756 29.7756 22 29.5 22H27.9548C27.7156 20.5834 26.4836 19.5 25 19.5C23.5164 19.5 22.2844 20.5834 22.0452 22H20.4079C20.4639 21.8428 20.5 21.6762 20.5 21.5V10H22V16C22 16.2522 22.1877 16.4648 22.438 16.4961L30 17.4413V21.5ZM30 16.4337L23 15.5586V10H25.9651C26.1323 10 26.2864 10.0825 26.3789 10.2224L30 15.6514V16.4337Z\" fill=\"#2C7226\"/>\r\n     <path d=\"M5.49996 11.4975C5.77611 11.4975 5.99994 11.2736 5.99994 10.9975C5.99994 10.7214 5.77605 10.4976 5.49996 10.4976H3.49998C3.22383 10.4976 3 10.7214 3 10.9975V14.9976C3 15.2737 3.22389 15.4975 3.49998 15.4975C3.77607 15.4975 3.99996 15.2737 3.99996 14.9976V13.4976H5.49996C5.77611 13.4976 5.99994 13.2737 5.99994 12.9976C5.99994 12.7215 5.77611 12.4975 5.49996 12.4975H3.99996V11.4975H5.49996Z\" fill=\"#2C7226\"/>\r\n     <path d=\"M10.5019 11.9976C10.5019 11.1704 9.8291 10.4976 9.00193 10.4976H7.50193C7.22578 10.4976 7.00195 10.7214 7.00195 10.9975V14.9976C7.00195 15.2737 7.22584 15.4975 7.50193 15.4975C7.77803 15.4975 8.00191 15.2737 8.00191 14.9976V13.4976H8.56635L9.56807 15.2461C9.66035 15.4075 9.82904 15.4976 10.0024 15.4976C10.0867 15.4976 10.1721 15.4764 10.2504 15.4314C10.4899 15.2942 10.5729 14.9886 10.4358 14.7491L9.63557 13.3522C10.1457 13.1124 10.5019 12.5975 10.5019 11.9976ZM9.00193 12.4975H8.00191V11.4975H9.00193C9.27756 11.4975 9.50191 11.7219 9.50191 11.9975C9.50191 12.2731 9.27756 12.4975 9.00193 12.4975Z\" fill=\"#2C7226\"/>\r\n     <path d=\"M14 11.4975C14.2761 11.4975 14.4999 11.2736 14.4999 10.9975C14.4999 10.7214 14.2761 10.4976 14 10.4976H12C11.7238 10.4976 11.5 10.7214 11.5 10.9975V14.9976C11.5 15.2737 11.7239 15.4975 12 15.4975H14C14.2761 15.4975 14.4999 15.2737 14.4999 14.9976C14.4999 14.7214 14.2761 14.4976 14 14.4976H12.5V13.4976H14C14.2761 13.4976 14.4999 13.2737 14.4999 12.9976C14.4999 12.7215 14.2761 12.4976 14 12.4976H12.5V11.4976L14 11.4975Z\" fill=\"#2C7226\"/>\r\n     <path d=\"M18.0019 11.4975C18.2781 11.4975 18.5019 11.2736 18.5019 10.9975C18.5019 10.7214 18.278 10.4976 18.0019 10.4976H16.0019C15.7258 10.4976 15.502 10.7214 15.502 10.9975V14.9976C15.502 15.2737 15.7258 15.4975 16.0019 15.4975H18.0019C18.2781 15.4975 18.5019 15.2737 18.5019 14.9976C18.5019 14.7214 18.278 14.4976 18.0019 14.4976H16.5019V13.4976H18.0019C18.2781 13.4976 18.5019 13.2737 18.5019 12.9976C18.5019 12.7215 18.278 12.4976 18.0019 12.4976H16.5019V11.4976L18.0019 11.4975Z\" fill=\"#2C7226\"/>\r\n    </svg>\r\n    `\r\n}\r\n\r\nconst freeDeliveryBanner = (currency: string, threshold: number) => {\r\n  return /* HTML */ `\r\n    <div class=\"free_delivery_banner\">\r\n      <style>\r\n        ${freeDeliveryBannerStyles}\r\n      </style>\r\n      <div class=\"free_delivery_banner_item\">\r\n        ${svg.deliveryBox}\r\n        <p>FREE Delivery on ${currency}${threshold}</p>\r\n      </div>\r\n      <div class=\"free_delivery_banner_item\">\r\n        ${svg.deliveryArrows}\r\n        <p>60 days FREE returns</p>\r\n      </div>\r\n    </div>\r\n  `\r\n}\r\n\r\nconst needMoreBlock = (country: 'UK' | 'US', currency: string, threshold: number) => {\r\n  return /* HTML */ `\r\n    <div class=\"crs_need_more threshold_banner\">\r\n      <style>\r\n        ${thresholdBannerStyles}\r\n      </style>\r\n      ${svg.packMore}\r\n      <p>\r\n        <b>Free Express ${country} Delivery</b> on orders over\r\n        <span class=\"accent_color_red\">${currency}${threshold}</span>\r\n      </p>\r\n    </div>\r\n  `\r\n}\r\n\r\nconst completeBlock = (country: 'UK' | 'US') => {\r\n  return /* HTML */ `\r\n    <div class=\"crs_complete threshold_banner\">\r\n      <style>\r\n        ${thresholdBannerStyles}\r\n      </style>\r\n      ${svg.packSuccess}\r\n      <p>\r\n        <b>Congratulations!</b> You have <br /><span class=\"accent_color_green\">Free Express ${country} Delivery</span>\r\n      </p>\r\n    </div>\r\n  `\r\n}\r\n\r\nconst progressBlock = (\r\n  progressWidth: number,\r\n  currency: string,\r\n  threshold: number,\r\n  price: number,\r\n  country: 'UK' | 'US'\r\n) => {\r\n  return /*html*/ `\r\n  <div class=\"crs_progress threshold_banner\">\r\n    <style>\r\n      ${thresholdBannerStyles}\r\n    </style>\r\n    <div class=\"crs_progress_bar\">\r\n        <div class=\"crs_progress_line\" style=\"width: ${progressWidth.toFixed(2)}%\"></div>\r\n    </div>\r\n    <p>You are <span class=\"accent_color_red\">${currency}${(threshold - price).toFixed(\r\n      2\r\n    )} </span> away from <b>Free Express ${country} Delivery</b></p>\r\n  </div>\r\n`\r\n}\r\n\r\nexport { svg, freeDeliveryBanner, needMoreBlock, completeBlock, progressBlock }\r\n","import { startLog, $el, $$el, waitForElement, visibilityOfTime, pushData } from '../../libraries'\r\nimport { svg, freeDeliveryBanner, needMoreBlock, completeBlock, progressBlock } from './blocks'\r\n\r\nstartLog({ name: 'Free Delivery Threshold_2nd iteration', dev: 'SKh' })\r\n\r\nconst baseUrl = window.location.pathname\r\nconst device = window.innerWidth < 768 ? 'mobile' : 'desktop'\r\n\r\nclass FreeDelivery {\r\n  device: 'mobile' | 'desktop'\r\n  baseUrl: string\r\n  country: 'UK' | 'US'\r\n  currency: string\r\n  threshold: number\r\n  observer: null | MutationObserver\r\n  lastPath: string\r\n\r\n  constructor(baseUrl, device) {\r\n    this.observer = null\r\n    this.lastPath = window.location.pathname\r\n    this.device = device\r\n    this.baseUrl = baseUrl\r\n    this.country = 'UK'\r\n    this.currency = '£'\r\n    this.threshold = 75.0\r\n    this.init()\r\n    this.observePageChange()\r\n  }\r\n\r\n  init() {\r\n    waitForElement('body.content-initiated').then(() => {\r\n      this.visibleHandler()\r\n      this.getGrandTotalPriceFromWindow()\r\n      this.renderFreeDeliveryBanner()\r\n      this.productPage()\r\n      this.cartPage()\r\n      this.addEventListeners()\r\n    })\r\n  }\r\n\r\n  observePageChange() {\r\n    this.observer = new MutationObserver(mutations => {\r\n      mutations.forEach(mutation => {\r\n        if (window.location.pathname !== this.lastPath) {\r\n          if (this.lastPath === '/basket') {\r\n            setTimeout(() => {\r\n              this.renderFreeDeliveryBanner()\r\n            }, 400)\r\n          } else {\r\n            this.renderFreeDeliveryBanner()\r\n          }\r\n          this.lastPath = window.location.pathname\r\n          this.productPage()\r\n        }\r\n\r\n        for (let node of mutation.addedNodes) {\r\n          if (!(node instanceof HTMLElement)) continue\r\n\r\n          if (node.matches('basket-view-totals > .flex') || node.matches('modal-bottom-container basket-add-notice')) {\r\n            this.getGrandTotalPriceFromWindow()\r\n            this.cartPage()\r\n            this.addEventListeners()\r\n            if (this.device === 'desktop') {\r\n              this.checkBasketDesktop()\r\n            } else {\r\n              this.checkBasketMobile()\r\n            }\r\n          }\r\n          if (node.matches('[cy-basketempty]') && localStorage.getItem('basketPriceForIcon')) {\r\n            localStorage.removeItem('basketPriceForIcon')\r\n            this.changeIconHeader()\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n    const config = { childList: true, subtree: true }\r\n    this.observer.observe(document.body, config)\r\n  }\r\n\r\n  renderFreeDeliveryBanner(): void {\r\n    let place: string = ''\r\n\r\n    let checkPage = this.checkPage()\r\n    console.log(checkPage)\r\n    switch (checkPage) {\r\n      case 'product':\r\n        $el('header .listing_var.free_delivery_banner')?.remove()\r\n        if (this.device === 'desktop') {\r\n          place = 'beforebegin'\r\n        } else {\r\n          place = 'afterend'\r\n        }\r\n        if (!$el('header .free_delivery_banner')) {\r\n          $el('#header > .page-header__inner')?.insertAdjacentHTML(\r\n            place,\r\n            freeDeliveryBanner(this.currency, this.threshold)\r\n          )\r\n          if ($el('header .free_delivery_banner')) {\r\n            $el('header .free_delivery_banner').classList.add('product_var')\r\n          }\r\n          visibilityOfTime(\r\n            'header .product_var.free_delivery_banner',\r\n            'exp_free_delivery_stickybanner_01',\r\n            'Sticky banner',\r\n            'PDP Free delivery and returns sticky banner visibility'\r\n          )\r\n        }\r\n        break\r\n      case 'listing':\r\n        $el('header .product_var.free_delivery_banner')?.remove()\r\n        place = 'afterend'\r\n\r\n        if (!$el('header .free_delivery_banner')) {\r\n          $el('#header > .page-header__inner')?.insertAdjacentHTML(\r\n            place,\r\n            freeDeliveryBanner(this.currency, this.threshold)\r\n          )\r\n          if ($el('header .free_delivery_banner')) {\r\n            $el('header .free_delivery_banner').classList.add('listing_var')\r\n          }\r\n          visibilityOfTime(\r\n            'header .listing_var.free_delivery_banner',\r\n            'exp_free_delivery_stickybanner_03',\r\n            'Sticky banner',\r\n            'Listing Free delivery and returns sticky banner visibility'\r\n          )\r\n        }\r\n        break\r\n      default:\r\n        $el('header .free_delivery_banner')?.remove()\r\n        break\r\n    }\r\n  }\r\n\r\n  productPage(): void {\r\n    setTimeout(() => {\r\n      let startPrice = 0\r\n      let deliveryNoteElement = $el('product-view-delivery-note')\r\n      let priceElement = $el('product-view-price .price')\r\n      let thresholdBannerElement = $el('product-view-layout .threshold_banner')\r\n      thresholdBannerElement?.remove()\r\n\r\n      if (deliveryNoteElement) {\r\n        deliveryNoteElement.style.display = 'none'\r\n\r\n        if (priceElement) {\r\n          let price: number = this.priceToNumber(priceElement.textContent)\r\n          if (price !== startPrice) {\r\n            startPrice = price\r\n            deliveryNoteElement.insertAdjacentHTML('beforebegin', this.drawThreshold(price))\r\n            visibilityOfTime(\r\n              'product-view-layout .crs_need_more.threshold_banner',\r\n              'exp_free_delivery_banner_01',\r\n              'Banner',\r\n              'PDP Free Express UK Delivery on orders over £'\r\n            )\r\n            visibilityOfTime(\r\n              'product-view-layout .crs_complete.threshold_banner',\r\n              'exp_free_delivery_banner_02',\r\n              'Banner',\r\n              'PDP Congratulations! You have Free Express UK Delivery'\r\n            )\r\n          }\r\n        }\r\n      }\r\n    }, 500)\r\n  }\r\n\r\n  checkBasketMobile(): void {\r\n    //check BasketMobile\r\n    if (this.device === 'mobile') {\r\n      waitForElement('basket-add-notice .b-t').then(i => {\r\n        if (!$el('basket-add-notice .free_delivery_banner')) {\r\n          $el('basket-add-notice .b-t')?.insertAdjacentHTML(\r\n            'beforebegin',\r\n            freeDeliveryBanner(this.currency, this.threshold)\r\n          )\r\n          visibilityOfTime(\r\n            'basket-add-notice .free_delivery_banner',\r\n            'exp_free_delivery_stickybanner_02',\r\n            'Sticky banner',\r\n            'Minibasket Free delivery and returns sticky banner visibility'\r\n          )\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  checkBasketDesktop(): void {\r\n    waitForElement('minibasket basket-view-totals').then(i => {\r\n      if ($el('minibasket .custom-scrollbar>div:first-child')) {\r\n        $el('minibasket .custom-scrollbar>div:first-child').style.display = 'none'\r\n      }\r\n      let basketPrice: any | null = localStorage.getItem('basketPriceForIcon')\r\n      const thresholdExceeded: boolean = basketPrice !== null\r\n      if (thresholdExceeded) {\r\n        basketPrice = +basketPrice\r\n        $el('minibasket .threshold_banner') ? $el('minibasket .threshold_banner').remove() : ''\r\n        $el('minibasket basket-view-totals').insertAdjacentHTML('afterend', this.drawThreshold(basketPrice, true))\r\n        visibilityOfTime(\r\n          'minibasket .crs_progress.threshold_banner',\r\n          'exp_free_delivery_banner_05',\r\n          'Banner',\r\n          'Cart You are £ away from Free Express UK  Delivery'\r\n        )\r\n        visibilityOfTime(\r\n          'minibasket .crs_complete.threshold_banner',\r\n          'exp_free_delivery_banner_06',\r\n          'Banner',\r\n          'Cart Congratulations! You have Free Express UK Delivery'\r\n        )\r\n      }\r\n    })\r\n  }\r\n\r\n  cartPage(): void {\r\n    waitForElement('basket-view-totals>div:first-of-type>div').then(i => {\r\n      if (this.checkPage() === 'basket') {\r\n        let basketPrice: any | null = localStorage.getItem('basketPriceForIcon')\r\n        const thresholdExceeded: boolean = basketPrice !== null\r\n\r\n        if (thresholdExceeded) {\r\n          basketPrice = +basketPrice\r\n          if ($el('basket-view .threshold_banner')) $el('basket-view .threshold_banner').remove()\r\n          if (this.device === 'mobile') {\r\n            $el('basket-view bottom-panel').insertAdjacentHTML('afterbegin', this.drawThreshold(basketPrice))\r\n          } else {\r\n            $el('basket-view ul').insertAdjacentHTML('beforebegin', this.drawThreshold(basketPrice))\r\n          }\r\n          visibilityOfTime(\r\n            'basket-view .crs_progress.threshold_banner',\r\n            'exp_free_delivery_banner_03',\r\n            'Banner',\r\n            'Shopping Bag You are £ away from Free Express UK  Delivery'\r\n          )\r\n          visibilityOfTime(\r\n            'basket-view .crs_complete.threshold_banner',\r\n            'exp_free_delivery_banner_04',\r\n            'Banner',\r\n            'Shopping Bag Congratulations! You have Free Express UK Delivery'\r\n          )\r\n        }\r\n        $el('basket-view>div>div>div>div>*:nth-child(3)>div.inline-block')?.remove()\r\n      }\r\n    })\r\n  }\r\n\r\n  changeIconHeader(): void {\r\n    let t: boolean = false\r\n    const basketPrice: string | null = localStorage.getItem('basketPriceForIcon')\r\n    const thresholdExceeded: boolean = basketPrice !== null && +basketPrice >= this.threshold\r\n\r\n    $$el('basket-qty').forEach(el => {\r\n      const hasHeaderIcon: boolean = !!el.querySelector('.header_icon')\r\n      const lastHeaderIcon = el.querySelector('[cy-basketbagbtn]')\r\n\r\n      if (thresholdExceeded) {\r\n        if (!hasHeaderIcon) {\r\n          if (t) return\r\n          t = true\r\n          el.insertAdjacentHTML('beforeend', svg.headerIcon)\r\n          let s = setInterval(() => {\r\n            if (!$el('.cdk-overlay-backdrop')) {\r\n              clearInterval(s)\r\n              visibilityOfTime(\r\n                'header .header_icon',\r\n                'exp_free_delivery_icon_vis_02',\r\n                'Icone',\r\n                'Header Free delivery icon  visibility'\r\n              )\r\n            }\r\n          }, 100)\r\n        }\r\n        lastHeaderIcon.style.display = 'none'\r\n      } else {\r\n        if (el.querySelector('.header_icon') == null) return\r\n        t = false\r\n        el.querySelector('.header_icon')?.remove()\r\n        lastHeaderIcon.style.display = 'block'\r\n        let s = setInterval(() => {\r\n          if (!$el('.cdk-overlay-backdrop')) {\r\n            clearInterval(s)\r\n            visibilityOfTime(\r\n              'basket-qty .page-header__icon',\r\n              'exp_free_delivery_icon_vis_01',\r\n              'Icone',\r\n              'Header Cart icon visibility'\r\n            )\r\n          }\r\n        }, 100)\r\n      }\r\n    })\r\n  }\r\n\r\n  checkPage(): string {\r\n    const url = window.location.href\r\n    switch (true) {\r\n      case $el('product-view-layout') !== null:\r\n        return 'product'\r\n      case $el('category-view-layout') !== null:\r\n        return 'listing'\r\n      case url.includes('/basket'):\r\n        return 'basket'\r\n      default:\r\n        return 'other'\r\n    }\r\n  }\r\n\r\n  getGrandTotalPriceFromWindow() {\r\n    const grandTotal = window?.app?.customer?.basket?.data?.totals?.grand_total\r\n    if (grandTotal !== undefined) {\r\n      localStorage.setItem('basketPriceForIcon', `${grandTotal}`)\r\n    }\r\n    this.changeIconHeader()\r\n  }\r\n\r\n  priceToNumber(txt: string): number {\r\n    let priceTxt: number = parseFloat(txt.replace(',', '.').replace(/[^0-9.]/g, ''))\r\n    return priceTxt\r\n  }\r\n\r\n  drawThreshold(price: number, basket: boolean = false) {\r\n    const progressWidth = (price / this.threshold) * 100\r\n\r\n    if (price < this.threshold && this.checkPage() === 'product' && !basket) {\r\n      return needMoreBlock(this.country, this.currency, this.threshold)\r\n    } else if (price < this.threshold) {\r\n      return progressBlock(progressWidth, this.currency, this.threshold, price, this.country)\r\n    } else if (price >= this.threshold) {\r\n      return completeBlock(this.country)\r\n    }\r\n  }\r\n\r\n  visibleHandler() {\r\n    // HEADER  -----> header\r\n    waitForElement('header').then(i => {\r\n      visibilityOfTime('header', 'exp_free_delivery_section_01', 'Section', 'Header')\r\n    })\r\n    waitForElement('basket-qty .page-header__icon').then(i => {\r\n      visibilityOfTime(\r\n        'basket-qty .page-header__icon',\r\n        'exp_free_delivery_icon_vis_01',\r\n        'Icone',\r\n        'Header Cart icon visibility'\r\n      )\r\n    })\r\n  }\r\n\r\n  addEventListeners(): void {\r\n    waitForElement('header .header_icon').then(i => {\r\n      $el('header .header_icon')?.addEventListener('click', e => {\r\n        if (!e.target.getAttribute('data-test')) {\r\n          pushData('exp_free_delivery_icon_01', 'Icone', 'click', 'Header Free delivery icon  visibility')\r\n        }\r\n        e.target.setAttribute('data-test', '1')\r\n        setTimeout(() => {\r\n          if (e.target.getAttribute('data-test')) {\r\n            e.target.removeAttribute('data-test')\r\n          }\r\n        }, 1000)\r\n      })\r\n    })\r\n  }\r\n}\r\nnew FreeDelivery(baseUrl, device)\r\n"],"names":["pushData","name","desc","type","loc","startLog","dev","$$el","selector","$el","visibilityOfTime","eventName","visiblePlace","description","time","threshold","observer","timer","entries","element","waitForElement","resolve","freeDeliveryBannerStyles","thresholdBannerStyles","svg","freeDeliveryBanner","currency","needMoreBlock","country","completeBlock","progressBlock","progressWidth","price","baseUrl","device","FreeDelivery","mutations","mutation","node","config","place","checkPage","_a","_b","_c","_d","_e","startPrice","deliveryNoteElement","priceElement","thresholdBannerElement","i","basketPrice","t","thresholdExceeded","el","hasHeaderIcon","lastHeaderIcon","s","url","grandTotal","txt","basket","e"],"mappings":"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"}