console.log("%c EXP: Trial Selection (DEV: SKh)", "background: #3498eb; color: #fccf3a; font-size: 20px; font-weight: bold;");
const $$el = (selector) => document.querySelectorAll(selector);
const $el = (selector) => document.querySelector(selector);
const git = "https://conversionratestore.github.io/projects/";

// cdn slider
let scriptCustomSlider = document.createElement("script");
scriptCustomSlider.src = "https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js";
scriptCustomSlider.async = false;
document.head.appendChild(scriptCustomSlider);

let scriptCustomSliderStyle = document.createElement("link");
scriptCustomSliderStyle.href = "https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css";
scriptCustomSliderStyle.rel = "stylesheet";
document.head.appendChild(scriptCustomSliderStyle);
// script tooltip
let scriptPopper = document.createElement("script");
scriptPopper.src = "https://unpkg.com/popper.js@1";
scriptPopper.async = false;
document.body.appendChild(scriptPopper);

let scriptTippy = document.createElement("script");
scriptTippy.src = "https://unpkg.com/tippy.js@5";
scriptTippy.async = false;
document.body.appendChild(scriptTippy);

const clarityInterval = setInterval(function () {
  if (typeof clarity == "function") {
    clearInterval(clarityInterval);
    clarity("set", "", "variant_1");
  }
}, 1000);

const pushDataLayer = (name, desc, type = "", loc = "") => {
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    event: "event-to-ga4",
    event_name: name,
    event_desc: desc,
    event_type: type,
    event_loc: loc,
  });
  console.log(`Event: ${name} ${desc} ${type} ${loc}`);
};

let level = "";
let disclaimerDates = "";
let levelImg = "";
const currentMonth = new Date().toLocaleString("en-US", {
  month: "short",
});

switch (window.pathname) {
  case "/tiq-score-severe-v1/":
    level = "severe";
    disclaimerDates = 56;
    levelImg = `${git}/treblehealth/img/severe_img.svg`;

    break;
  case "/tiq-score-serious-v1/":
    level = "serious";
    disclaimerDates = 47;
    levelImg = `${git}/treblehealth/img/serious_img.svg`;
    break;
  case "/tiq-score-moderate-v1/":
    level = "moderate";
    disclaimerDates = 34;
    levelImg = `${git}/treblehealth/img/moderate_img.svg`;
    break;

  default:
    break;
}

let reliefDate = new Date(new Date().getTime() + disclaimerDates * 24 * 60 * 60 * 1000).toLocaleString("en-US", {
  day: "2-digit",
  month: "short",
});
let reliefMonth = new Date(new Date().getTime() + disclaimerDates * 24 * 60 * 60 * 1000).toLocaleString("en-US", {
  month: "short",
});

const svgObj = {
  ear: /*html*/ `
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="40" viewBox="0 0 30 40" fill="none">
        <path d="M9.64851 40C7.2109 40 4.77905 39.0146 3.03295 37.0841C0.497369 34.2776 0.0709304 30.0824 1.97262 26.6363C2.23194 26.1695 2.81973 26.0024 3.28651 26.256C3.75329 26.5153 3.9204 27.1031 3.66685 27.5699C2.16278 30.2899 2.4855 33.5861 4.46786 35.7817C7.00344 38.5824 11.3773 38.8417 14.2241 36.358C15.1231 35.5743 15.8031 34.5773 16.2007 33.4651C17.6068 29.5292 19.8946 26.1753 22.8163 23.7665C25.6688 21.4153 27.3054 17.952 27.3054 14.2581C27.3054 10.8178 25.9223 7.62523 23.4156 5.26829C20.9088 2.91711 17.6183 1.74153 14.178 1.96051C8.00039 2.35237 2.95227 7.50997 2.68143 13.6991C2.65838 14.235 2.19736 14.6384 1.67296 14.6211C1.13703 14.5981 0.727877 14.1486 0.750928 13.6127C1.06788 6.44964 6.91124 0.48526 14.0627 0.0300078C18.0505 -0.22355 21.8481 1.13644 24.7467 3.85643C27.6108 6.54184 29.2474 10.3337 29.2474 14.2523C29.2474 18.5225 27.3572 22.5333 24.0552 25.2533C21.3986 27.4431 19.3183 30.5031 18.0275 34.1105C17.5203 35.5339 16.6444 36.8132 15.5034 37.8159C13.8207 39.2797 11.7346 40 9.64851 40Z" fill="#2E168D"/>
        <path d="M8.55334 20.9773C8.28249 20.9773 8.01165 20.862 7.82148 20.6431C6.34623 18.9315 5.53369 16.7359 5.53369 14.477C5.53369 9.26175 9.77503 5.01465 14.996 5.01465C20.217 5.01465 24.4584 9.26175 24.4584 14.477C24.4584 15.0129 24.0261 15.4451 23.4902 15.4451C22.9543 15.4451 22.5221 15.0129 22.5221 14.477C22.5221 10.3278 19.1452 6.95091 14.996 6.95091C10.8469 6.95091 7.46995 10.3278 7.46995 14.477C7.46995 16.2807 8.11538 18.021 9.29096 19.381C9.63672 19.7844 9.59639 20.3953 9.18723 20.7468C9.00283 20.8966 8.77808 20.9773 8.55334 20.9773Z" fill="#2E168D"/>
        <path d="M11.5498 26.2559C13.6217 26.2559 15.3014 24.5763 15.3014 22.5044C15.3014 20.4325 13.6217 18.7529 11.5498 18.7529C9.47795 18.7529 7.79834 20.4325 7.79834 22.5044C7.79834 24.5763 9.47795 26.2559 11.5498 26.2559Z" fill="#B5A6F2"/>
        <path d="M11.5502 27.2239C8.94547 27.2239 6.83057 25.1033 6.83057 22.5043C6.83057 19.9053 8.94547 17.7847 11.5502 17.7847C14.1549 17.7847 16.2698 19.9053 16.2698 22.5043C16.2698 25.1033 14.1492 27.2239 11.5502 27.2239ZM11.5502 19.7152C10.0116 19.7152 8.76107 20.9657 8.76107 22.5043C8.76107 24.0429 10.0116 25.2934 11.5502 25.2934C13.0888 25.2934 14.3393 24.0429 14.3393 22.5043C14.3393 20.9657 13.0831 19.7152 11.5502 19.7152Z" fill="#2E168D"/>
    </svg>
  `,
  guarantee: /*html*/ `
    <svg xmlns="http://www.w3.org/2000/svg" width="41" height="40" viewBox="0 0 41 40" fill="none">
        <mask id="mask0_819_532" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="41" height="40">
        <path d="M40.25 0H0.25V40H40.25V0Z" fill="white"/>
        </mask>
        <g mask="url(#mask0_819_532)">
        <path d="M37.7303 20.0027C37.7303 17.4354 39.9949 14.4372 39.0692 12.2076C38.1086 9.89642 34.3537 9.38415 32.6131 7.64347C30.8724 5.90284 30.3602 2.14793 28.049 1.18737C25.8193 0.261737 22.8212 2.52633 20.2539 2.52633C17.6866 2.52633 14.6885 0.261737 12.4588 1.18737C10.1477 2.14793 9.63534 5.90284 7.89473 7.64347C6.15406 9.38415 2.39914 9.89642 1.43859 12.2076C0.512958 14.4372 2.77755 17.4354 2.77755 20.0027C2.77755 22.57 0.512958 25.5681 1.43859 27.7978C2.36422 30.0274 6.15406 30.6212 7.89473 32.3618C9.63534 34.1025 10.1477 37.8574 12.4588 38.818C14.6885 39.7436 17.6866 37.479 20.2539 37.479C22.8212 37.479 25.8193 39.7436 28.049 38.818C30.2787 37.8924 30.8724 34.1025 32.6131 32.3618C34.3537 30.6212 38.1086 30.1089 39.0692 27.7978C39.9949 25.5681 37.7303 22.57 37.7303 20.0027Z" fill="#EEEBFB"/>
        <path d="M26.8494 39.9997C25.6852 39.9997 24.4801 39.5864 23.3041 39.1789C22.2505 38.8179 21.1618 38.4396 20.2478 38.4396C19.3338 38.4396 18.2452 38.8179 17.1915 39.1789C15.4799 39.7669 13.716 40.3782 12.086 39.7028C10.386 38.9984 9.5594 37.2752 8.76184 35.6103C8.27282 34.5973 7.81296 33.6367 7.2133 33.0371C6.61369 32.4375 5.65313 31.9776 4.64017 31.4886C2.97521 30.691 1.25785 29.8644 0.547611 28.1645C-0.127691 26.5344 0.483573 24.7647 1.07155 23.059C1.43249 22.0053 1.81089 20.9167 1.81089 20.0026C1.81089 19.0887 1.43249 18 1.07155 16.9463C0.483573 15.2406 -0.127691 13.4708 0.547611 11.8408C1.25202 10.1409 2.97521 9.31422 4.64017 8.51666C5.65313 8.02764 6.61369 7.56778 7.2133 6.96811C7.81296 6.36852 8.27282 5.40796 8.76184 4.39501C9.5594 2.73004 10.386 1.01268 12.086 0.302446C13.716 -0.372856 15.4858 0.238409 17.1915 0.826384C18.2452 1.18733 19.3338 1.56573 20.2478 1.56573C21.1618 1.56573 22.2505 1.18733 23.3041 0.826384C25.0098 0.232587 26.7796 -0.372856 28.4096 0.302446C30.1096 1.00686 30.9362 2.73004 31.7338 4.39501C32.2228 5.40796 32.6827 6.36852 33.2823 6.96811C33.8819 7.56778 34.8425 8.02764 35.8554 8.51666C37.5204 9.31422 39.2378 10.1409 39.9422 11.8408C40.6175 13.4708 40.0062 15.2406 39.4182 16.9463C39.0573 18 38.6789 19.0887 38.6789 20.0026C38.6789 20.9167 39.0573 22.0053 39.4182 23.059C40.0062 24.7647 40.6175 26.5344 39.9422 28.1645C39.2378 29.8644 37.5146 30.691 35.8554 31.4886C34.8425 31.9776 33.8819 32.4375 33.2823 33.0371C32.6827 33.6367 32.2228 34.5973 31.7338 35.6103C30.9362 37.2752 30.1096 38.9984 28.4096 39.7028C27.9032 39.9124 27.3792 39.9997 26.8494 39.9997ZM20.2478 36.5126C21.4878 36.5126 22.7278 36.9434 23.9328 37.3567C25.365 37.8516 26.7155 38.3173 27.6761 37.9214C28.7007 37.4965 29.3353 36.175 30.0048 34.772C30.5403 33.6542 31.0934 32.5015 31.9258 31.6691C32.7584 30.8366 33.911 30.2835 35.0288 29.7479C36.4317 29.0727 37.7532 28.4381 38.1724 27.4193C38.5683 26.4646 38.1026 25.1082 37.6077 23.676C37.1944 22.471 36.7636 21.231 36.7636 19.991C36.7636 18.751 37.1944 17.511 37.6077 16.3059C38.1026 14.8738 38.5683 13.5232 38.1724 12.5627C37.7475 11.5439 36.426 10.9035 35.0288 10.234C33.911 9.69849 32.7584 9.1454 31.9258 8.31293C31.0934 7.48045 30.5403 6.32777 30.0048 5.21003C29.3294 3.80703 28.6949 2.48554 27.6761 2.06638C26.7155 1.67051 25.365 2.13624 23.9328 2.63108C22.7278 3.0444 21.4878 3.4752 20.2478 3.4752C19.0078 3.4752 17.7678 3.0444 16.5627 2.63108C15.1307 2.13624 13.78 1.6647 12.8195 2.06638C11.8007 2.49135 11.1603 3.81285 10.4909 5.21585C9.95526 6.33359 9.40225 7.48628 8.5697 8.31876C7.73723 9.15123 6.58458 9.70425 5.46684 10.2398C4.06384 10.9152 2.74234 11.5497 2.31737 12.5685C1.9215 13.5232 2.38723 14.8796 2.88206 16.3118C3.29539 17.5169 3.72618 18.7568 3.72618 19.9968C3.72618 21.2368 3.29539 22.4768 2.88206 23.6819C2.38723 25.1139 1.9215 26.4646 2.31737 27.4251C2.74234 28.4497 4.06384 29.0843 5.46102 29.7537C6.57875 30.2893 7.7314 30.8424 8.56394 31.6749C9.39642 32.5074 9.94943 33.66 10.485 34.7778C11.1603 36.1808 11.7949 37.5023 12.8136 37.9214C13.7742 38.3173 15.1248 37.8516 16.557 37.3567C17.762 36.9434 19.002 36.5126 20.242 36.5126H20.2478Z" fill="#2E168D"/>
        <path d="M18.0357 17.1326H13.8791C13.5473 17.1326 13.2446 16.9638 13.0699 16.6843C12.8952 16.4049 12.8719 16.0556 13.0117 15.7587L15.7245 9.97203C15.9515 9.48885 16.522 9.28512 17.0052 9.51217C17.4884 9.73922 17.6922 10.3097 17.4652 10.7929L15.3927 15.2115H18.0415C18.5713 15.2115 19.002 15.6423 19.002 16.172C19.002 16.7018 18.5713 17.1326 18.0415 17.1326H18.0357Z" fill="#2E168D"/>
        <path d="M18.7174 20.0142C18.1876 20.0142 17.7568 19.5833 17.7568 19.0536V13.7502C17.7568 13.2204 18.1876 12.7896 18.7174 12.7896C19.2471 12.7896 19.6779 13.2204 19.6779 13.7502V19.0536C19.6779 19.5833 19.2471 20.0142 18.7174 20.0142Z" fill="#2E168D"/>
        <path d="M23.9789 20.0493C22.9426 20.0493 21.9413 19.601 21.2485 18.8035C20.8992 18.4018 20.9458 17.7964 21.3416 17.4471C21.7433 17.0978 22.3488 17.1444 22.6981 17.5402C23.094 18.0001 23.7111 18.2097 24.3107 18.0875C24.7531 18.0001 25.1373 17.744 25.3877 17.3656C25.638 16.9871 25.7253 16.5389 25.638 16.0965C25.4517 15.1825 24.561 14.5887 23.647 14.7692C23.4083 14.8157 23.1871 14.9147 22.9892 15.0544C22.5584 15.3688 21.9587 15.2698 21.6444 14.839C21.3358 14.4082 21.429 13.8086 21.8598 13.4943C22.2789 13.1915 22.7563 12.9819 23.2686 12.8829C25.2188 12.4929 27.1283 13.762 27.5241 15.7181C27.7163 16.667 27.5242 17.6275 26.9886 18.4309C26.453 19.2343 25.638 19.7815 24.689 19.9678C24.4562 20.0144 24.2175 20.0376 23.9846 20.0376L23.9789 20.0493Z" fill="#2E168D"/>
        <path d="M22.4191 15.2465C22.3608 15.2465 22.3026 15.2465 22.2386 15.229C21.7147 15.13 21.3711 14.6294 21.4701 14.1054L22.2094 10.2108C22.2968 9.7567 22.6927 9.43066 23.1526 9.43066H26.6223C27.152 9.43066 27.5828 9.86151 27.5828 10.3913C27.5828 10.921 27.152 11.3518 26.6223 11.3518H23.9501L23.3621 14.4663C23.2748 14.9263 22.8731 15.2465 22.4191 15.2465Z" fill="#2E168D"/>
        <path d="M28.1888 26.9826C27.8978 26.9826 27.6125 26.8546 27.4263 26.6042L24.923 23.3383C24.597 22.9192 24.6785 22.3138 25.0976 21.9936C25.5168 21.6675 26.1222 21.749 26.4424 22.1682L28.9457 25.4341C29.2717 25.8532 29.1902 26.4587 28.771 26.7788C28.5964 26.9127 28.3926 26.9768 28.1888 26.9768V26.9826Z" fill="#2E168D"/>
        <path d="M26.5233 29.7131C26.3371 29.7131 26.1566 29.6607 25.9877 29.55C25.5453 29.2531 25.4289 28.6594 25.7258 28.2169L29.7369 22.2265C30.0338 21.7841 30.6275 21.6676 31.07 21.9645C31.5124 22.2614 31.6289 22.8552 31.3319 23.2977L27.3209 29.2881C27.1346 29.5675 26.8319 29.7131 26.5233 29.7131Z" fill="#2E168D"/>
        <path d="M11.9399 29.7131H9.97226C9.4425 29.7131 9.01172 29.2823 9.01172 28.7526V22.8087C9.01172 22.2789 9.4425 21.8481 9.97226 21.8481H11.9399C14.123 21.8481 15.8986 23.6121 15.8986 25.7835C15.8986 27.955 14.123 29.7189 11.9399 29.7189V29.7131ZM10.9328 27.792H11.9399C13.0635 27.792 13.9717 26.8896 13.9717 25.7835C13.9717 24.6716 13.0577 23.7751 11.9399 23.7751H10.9328V27.7978V27.792Z" fill="#2E168D"/>
        <path d="M17.151 29.7133C17.0055 29.7133 16.8542 29.6784 16.7144 29.6085C16.2429 29.364 16.0566 28.7877 16.2952 28.3161L19.3691 22.3257C19.5321 22.0055 19.8639 21.8018 20.2248 21.8018C20.5858 21.8018 20.9176 22.0055 21.0806 22.3257L24.1544 28.3161C24.3989 28.7877 24.2126 29.3698 23.7352 29.6085C23.2637 29.853 22.6816 29.6667 22.4428 29.1893L20.2248 24.8697L18.0068 29.1893C17.838 29.5211 17.5003 29.7133 17.151 29.7133Z" fill="#2E168D"/>
        <path d="M21.9716 28.8513H18.0362C17.5065 28.8513 17.0757 28.4205 17.0757 27.8907C17.0757 27.361 17.5065 26.9302 18.0362 26.9302H21.9716C22.5014 26.9302 22.9322 27.361 22.9322 27.8907C22.9322 28.4205 22.5014 28.8513 21.9716 28.8513Z" fill="#2E168D"/>
        </g>
    </svg>
    `,
  tooltip: /*html*/ `
    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
       <path d="M8.25 1C4.38428 1 1.25 4.13541 1.25 8C1.25 11.8668 4.38428 15 8.25 15C12.1157 15 15.25 11.8668 15.25 8C15.25 4.13541 12.1157 1 8.25 1ZM8.25 4.10484C8.90473 4.10484 9.43548 4.6356 9.43548 5.29032C9.43548 5.94505 8.90473 6.47581 8.25 6.47581C7.59527 6.47581 7.06452 5.94505 7.06452 5.29032C7.06452 4.6356 7.59527 4.10484 8.25 4.10484ZM9.83064 11.2742C9.83064 11.4612 9.67899 11.6129 9.49193 11.6129H7.00806C6.82101 11.6129 6.66935 11.4612 6.66935 11.2742V10.5968C6.66935 10.4097 6.82101 10.2581 7.00806 10.2581H7.34677V8.45161H7.00806C6.82101 8.45161 6.66935 8.29996 6.66935 8.1129V7.43548C6.66935 7.24843 6.82101 7.09677 7.00806 7.09677H8.81452C9.00157 7.09677 9.15323 7.24843 9.15323 7.43548V10.2581H9.49193C9.67899 10.2581 9.83064 10.4097 9.83064 10.5968V11.2742Z" fill="#2E168D"/>
    </svg>`,
  starReview: /*html*/ `
    <svg xmlns="http://www.w3.org/2000/svg" width="118" height="26" viewBox="0 0 118 26" fill="none"><g clip-path="url(#clip0_780_2415)"><g clip-path="url(#clip1_780_2415)"><path d="M7.4448 5.77496L5.5408 9.80396L1.2908 10.45C1.06414 10.4726 0.874304 10.586 0.721304 10.79C0.568304 10.994 0.494637 11.2263 0.500304 11.487C0.50597 11.7476 0.59947 11.9686 0.780804 12.15L3.8408 15.261L3.1268 19.732C3.08147 19.9813 3.1268 20.2051 3.2628 20.4035C3.3988 20.6018 3.58297 20.7321 3.8153 20.7945C4.04764 20.8568 4.2658 20.8313 4.4698 20.718L8.2948 18.729L12.1198 20.718C12.3465 20.8313 12.576 20.8568 12.8083 20.7945C13.0406 20.7321 13.2191 20.6018 13.3438 20.4035C13.4685 20.2051 13.5081 19.9813 13.4628 19.732L12.7658 15.261L15.8088 12.15C15.9901 11.9686 16.0836 11.7533 16.0893 11.504C16.095 11.2546 16.0241 11.028 15.8768 10.824C15.7295 10.62 15.5425 10.4953 15.3158 10.45L11.0658 9.80396L9.1448 5.77496C9.03147 5.54829 8.86147 5.39246 8.6348 5.30746C8.40814 5.22246 8.18147 5.22246 7.9548 5.30746C7.72814 5.39246 7.55814 5.54829 7.4448 5.77496Z" fill="#FBC762"/></g>
       </g><g clip-path="url(#clip2_780_2415)"><g clip-path="url(#clip3_780_2415)"><path d="M32.4448 5.77496L30.5408 9.80396L26.2908 10.45C26.0641 10.4726 25.8743 10.586 25.7213 10.79C25.5683 10.994 25.4946 11.2263 25.5003 11.487C25.506 11.7476 25.5995 11.9686 25.7808 12.15L28.8408 15.261L28.1268 19.732C28.0815 19.9813 28.1268 20.2051 28.2628 20.4035C28.3988 20.6018 28.583 20.7321 28.8153 20.7945C29.0476 20.8568 29.2658 20.8313 29.4698 20.718L33.2948 18.729L37.1198 20.718C37.3465 20.8313 37.576 20.8568 37.8083 20.7945C38.0406 20.7321 38.2191 20.6018 38.3438 20.4035C38.4685 20.2051 38.5081 19.9813 38.4628 19.732L37.7658 15.261L40.8088 12.15C40.9901 11.9686 41.0836 11.7533 41.0893 11.504C41.095 11.2546 41.0241 11.028 40.8768 10.824C40.7295 10.62 40.5425 10.4953 40.3158 10.45L36.0658 9.80396L34.1448 5.77496C34.0315 5.54829 33.8615 5.39246 33.6348 5.30746C33.4081 5.22246 33.1815 5.22246 32.9548 5.30746C32.7281 5.39246 32.5581 5.54829 32.4448 5.77496Z" fill="#FBC762"/></g></g><g clip-path="url(#clip4_780_2415)"><g clip-path="url(#clip5_780_2415)"><path d="M57.4448 5.77496L55.5408 9.80396L51.2908 10.45C51.0641 10.4726 50.8743 10.586 50.7213 10.79C50.5683 10.994 50.4946 11.2263 50.5003 11.487C50.506 11.7476 50.5995 11.9686 50.7808 12.15L53.8408 15.261L53.1268 19.732C53.0815 19.9813 53.1268 20.2051 53.2628 20.4035C53.3988 20.6018 53.583 20.7321 53.8153 20.7945C54.0476 20.8568 54.2658 20.8313 54.4698 20.718L58.2948 18.729L62.1198 20.718C62.3465 20.8313 62.576 20.8568 62.8083 20.7945C63.0406 20.7321 63.2191 20.6018 63.3438 20.4035C63.4685 20.2051 63.5081 19.9813 63.4628 19.732L62.7658 15.261L65.8088 12.15C65.9901 11.9686 66.0836 11.7533 66.0893 11.504C66.095 11.2546 66.0241 11.028 65.8768 10.824C65.7295 10.62 65.5425 10.4953 65.3158 10.45L61.0658 9.80396L59.1448 5.77496C59.0315 5.54829 58.8615 5.39246 58.6348 5.30746C58.4081 5.22246 58.1815 5.22246 57.9548 5.30746C57.7281 5.39246 57.5581 5.54829 57.4448 5.77496Z" fill="#FBC762"/>
       </g></g><g clip-path="url(#clip6_780_2415)"><g clip-path="url(#clip7_780_2415)"><path d="M82.4448 5.77496L80.5408 9.80396L76.2908 10.45C76.0641 10.4726 75.8743 10.586 75.7213 10.79C75.5683 10.994 75.4946 11.2263 75.5003 11.487C75.506 11.7476 75.5995 11.9686 75.7808 12.15L78.8408 15.261L78.1268 19.732C78.0815 19.9813 78.1268 20.2051 78.2628 20.4035C78.3988 20.6018 78.583 20.7321 78.8153 20.7945C79.0476 20.8568 79.2658 20.8313 79.4698 20.718L83.2948 18.729L87.1198 20.718C87.3465 20.8313 87.576 20.8568 87.8083 20.7945C88.0406 20.7321 88.2191 20.6018 88.3438 20.4035C88.4685 20.2051 88.5081 19.9813 88.4628 19.732L87.7658 15.261L90.8088 12.15C90.9901 11.9686 91.0836 11.7533 91.0893 11.504C91.095 11.2546 91.0241 11.028 90.8768 10.824C90.7295 10.62 90.5425 10.4953 90.3158 10.45L86.0658 9.80396L84.1448 5.77496C84.0315 5.54829 83.8615 5.39246 83.6348 5.30746C83.4081 5.22246 83.1815 5.22246 82.9548 5.30746C82.7281 5.39246 82.5581 5.54829 82.4448 5.77496Z" fill="#FBC762"/>
       </g></g><g clip-path="url(#clip8_780_2415)"><g clip-path="url(#clip9_780_2415)"><path d="M107.445 5.77496L105.541 9.80396L101.291 10.45C101.064 10.4726 100.874 10.586 100.721 10.79C100.568 10.994 100.495 11.2263 100.5 11.487C100.506 11.7476 100.599 11.9686 100.781 12.15L103.841 15.261L103.127 19.732C103.081 19.9813 103.127 20.2051 103.263 20.4035C103.399 20.6018 103.583 20.7321 103.815 20.7945C104.048 20.8568 104.266 20.8313 104.47 20.718L108.295 18.729L112.12 20.718C112.346 20.8313 112.576 20.8568 112.808 20.7945C113.041 20.7321 113.219 20.6018 113.344 20.4035C113.468 20.2051 113.508 19.9813 113.463 19.732L112.766 15.261L115.809 12.15C115.99 11.9686 116.084 11.7533 116.089 11.504C116.095 11.2546 116.024 11.028 115.877 10.824C115.729 10.62 115.542 10.4953 115.316 10.45L111.066 9.80396L109.145 5.77496C109.031 5.54829 108.861 5.39246 108.635 5.30746C108.408 5.22246 108.181 5.22246 107.955 5.30746C107.728 5.39246 107.558 5.54829 107.445 5.77496Z" fill="#FBC762"/>
       </g></g><g clip-path="url(#clip10_780_2415)"><path d="M15.3252 10.4498L11.0752 9.80377L9.15421 5.77477C9.04088 5.54811 8.87088 5.39227 8.64421 5.30727C8.41755 5.22227 8.19088 5.22227 7.96421 5.30727C7.73755 5.39227 7.56755 5.54811 7.45422 5.77477L5.55021 9.80377L1.30021 10.4498C1.05088 10.4951 0.852548 10.6113 0.705214 10.7983C0.557881 10.9853 0.489881 11.1978 0.501214 11.4358C0.512548 11.6738 0.608881 11.8891 0.790214 12.0818L3.85021 15.1928L3.13621 19.5958C3.09088 19.8451 3.13905 20.0718 3.28071 20.2758C3.42238 20.4798 3.60655 20.6158 3.83321 20.6838C4.05988 20.7518 4.27521 20.7178 4.47921 20.5818L8.30421 18.5248L12.1292 20.5818C12.3559 20.6951 12.5854 20.7206 12.8177 20.6583C13.05 20.5959 13.2285 20.4656 13.3532 20.2673C13.4779 20.0689 13.5175 19.8451 13.4722 19.5958L12.7752 15.1928L15.8182 12.0818C15.9995 11.9004 16.093 11.6851 16.0987 11.4358C16.1044 11.1864 16.0335 10.9654 15.8862 10.7728C15.7389 10.5801 15.5519 10.4724 15.3252 10.4498ZM11.2112 14.6998L11.9252 18.8818L8.30421 16.8928L4.70021 18.8818L5.39721 14.6998L2.49021 11.7248L6.53621 11.0788L8.30421 7.33877L10.1402 11.1638L14.1862 11.7928L11.2112 14.6998Z" fill="#CCD6DF"/>
       </g><g clip-path="url(#clip11_780_2415)"><path d="M40.3252 10.4498L36.0752 9.80377L34.1542 5.77477C34.0409 5.54811 33.8709 5.39227 33.6442 5.30727C33.4175 5.22227 33.1909 5.22227 32.9642 5.30727C32.7375 5.39227 32.5675 5.54811 32.4542 5.77477L30.5502 9.80377L26.3002 10.4498C26.0509 10.4951 25.8525 10.6113 25.7052 10.7983C25.5579 10.9853 25.4899 11.1978 25.5012 11.4358C25.5125 11.6738 25.6089 11.8891 25.7902 12.0818L28.8502 15.1928L28.1362 19.5958C28.0909 19.8451 28.139 20.0718 28.2807 20.2758C28.4224 20.4798 28.6065 20.6158 28.8332 20.6838C29.0599 20.7518 29.2752 20.7178 29.4792 20.5818L33.3042 18.5248L37.1292 20.5818C37.3559 20.6951 37.5854 20.7206 37.8177 20.6583C38.05 20.5959 38.2285 20.4656 38.3532 20.2673C38.4779 20.0689 38.5175 19.8451 38.4722 19.5958L37.7752 15.1928L40.8182 12.0818C40.9995 11.9004 41.093 11.6851 41.0987 11.4358C41.1044 11.1864 41.0335 10.9654 40.8862 10.7728C40.7389 10.5801 40.5519 10.4724 40.3252 10.4498ZM36.2112 14.6998L36.9252 18.8818L33.3042 16.8928L29.7002 18.8818L30.3972 14.6998L27.4902 11.7248L31.5362 11.0788L33.3042 7.33877L35.1402 11.1638L39.1862 11.7928L36.2112 14.6998Z" fill="#CCD6DF"/>
       </g><g clip-path="url(#clip12_780_2415)"><path d="M65.3252 10.4498L61.0752 9.80377L59.1542 5.77477C59.0409 5.54811 58.8709 5.39227 58.6442 5.30727C58.4175 5.22227 58.1909 5.22227 57.9642 5.30727C57.7375 5.39227 57.5675 5.54811 57.4542 5.77477L55.5502 9.80377L51.3002 10.4498C51.0509 10.4951 50.8525 10.6113 50.7052 10.7983C50.5579 10.9853 50.4899 11.1978 50.5012 11.4358C50.5125 11.6738 50.6089 11.8891 50.7902 12.0818L53.8502 15.1928L53.1362 19.5958C53.0909 19.8451 53.139 20.0718 53.2807 20.2758C53.4224 20.4798 53.6065 20.6158 53.8332 20.6838C54.0599 20.7518 54.2752 20.7178 54.4792 20.5818L58.3042 18.5248L62.1292 20.5818C62.3559 20.6951 62.5854 20.7206 62.8177 20.6583C63.05 20.5959 63.2285 20.4656 63.3532 20.2673C63.4779 20.0689 63.5175 19.8451 63.4722 19.5958L62.7752 15.1928L65.8182 12.0818C65.9995 11.9004 66.093 11.6851 66.0987 11.4358C66.1044 11.1864 66.0335 10.9654 65.8862 10.7728C65.7389 10.5801 65.5519 10.4724 65.3252 10.4498ZM61.2112 14.6998L61.9252 18.8818L58.3042 16.8928L54.7002 18.8818L55.3972 14.6998L52.4902 11.7248L56.5362 11.0788L58.3042 7.33877L60.1402 11.1638L64.1862 11.7928L61.2112 14.6998Z" fill="#CCD6DF"/>
       </g><g clip-path="url(#clip13_780_2415)"><path d="M90.3252 10.4498L86.0752 9.80377L84.1542 5.77477C84.0409 5.54811 83.8709 5.39227 83.6442 5.30727C83.4175 5.22227 83.1909 5.22227 82.9642 5.30727C82.7375 5.39227 82.5675 5.54811 82.4542 5.77477L80.5502 9.80377L76.3002 10.4498C76.0509 10.4951 75.8525 10.6113 75.7052 10.7983C75.5579 10.9853 75.4899 11.1978 75.5012 11.4358C75.5125 11.6738 75.6089 11.8891 75.7902 12.0818L78.8502 15.1928L78.1362 19.5958C78.0909 19.8451 78.139 20.0718 78.2807 20.2758C78.4224 20.4798 78.6065 20.6158 78.8332 20.6838C79.0599 20.7518 79.2752 20.7178 79.4792 20.5818L83.3042 18.5248L87.1292 20.5818C87.3559 20.6951 87.5854 20.7206 87.8177 20.6583C88.05 20.5959 88.2285 20.4656 88.3532 20.2673C88.4779 20.0689 88.5175 19.8451 88.4722 19.5958L87.7752 15.1928L90.8182 12.0818C90.9995 11.9004 91.093 11.6851 91.0987 11.4358C91.1044 11.1864 91.0335 10.9654 90.8862 10.7728C90.7389 10.5801 90.5519 10.4724 90.3252 10.4498ZM86.2112 14.6998L86.9252 18.8818L83.3042 16.8928L79.7002 18.8818L80.3972 14.6998L77.4902 11.7248L81.5362 11.0788L83.3042 7.33877L85.1402 11.1638L89.1862 11.7928L86.2112 14.6998Z" fill="#CCD6DF"/>
       </g><g clip-path="url(#clip14_780_2415)"><path d="M115.325 10.4498L111.075 9.80377L109.154 5.77477C109.041 5.54811 108.871 5.39227 108.644 5.30727C108.418 5.22227 108.191 5.22227 107.964 5.30727C107.738 5.39227 107.568 5.54811 107.454 5.77477L105.55 9.80377L101.3 10.4498C101.051 10.4951 100.853 10.6113 100.705 10.7983C100.558 10.9853 100.49 11.1978 100.501 11.4358C100.513 11.6738 100.609 11.8891 100.79 12.0818L103.85 15.1928L103.136 19.5958C103.091 19.8451 103.139 20.0718 103.281 20.2758C103.422 20.4798 103.607 20.6158 103.833 20.6838C104.06 20.7518 104.275 20.7178 104.479 20.5818L108.304 18.5248L112.129 20.5818C112.356 20.6951 112.585 20.7206 112.818 20.6583C113.05 20.5959 113.229 20.4656 113.353 20.2673C113.478 20.0689 113.518 19.8451 113.472 19.5958L112.775 15.1928L115.818 12.0818C116 11.9004 116.093 11.6851 116.099 11.4358C116.104 11.1864 116.034 10.9654 115.886 10.7728C115.739 10.5801 115.552 10.4724 115.325 10.4498ZM111.211 14.6998L111.925 18.8818L108.304 16.8928L104.7 18.8818L105.397 14.6998L102.49 11.7248L106.536 11.0788L108.304 7.33877L110.14 11.1638L114.186 11.7928L111.211 14.6998Z" fill="#CCD6DF"/>
       </g><defs><clipPath id="clip0_780_2415"><rect width="17" height="25" fill="white" transform="translate(0.5 0.5)"/></clipPath><clipPath id="clip1_780_2415"><rect width="17" height="25" fill="white" transform="matrix(1 0 0 -1 0.5 25.5)"/></clipPath><clipPath id="clip2_780_2415"><rect width="17" height="25" fill="white" transform="translate(25.5 0.5)"/></clipPath><clipPath id="clip3_780_2415"><rect width="17" height="25" fill="white" transform="matrix(1 0 0 -1 25.5 25.5)"/></clipPath><clipPath id="clip4_780_2415"><rect width="17" height="25" fill="white" transform="translate(50.5 0.5)"/></clipPath><clipPath id="clip5_780_2415"><rect width="17" height="25" fill="white" transform="matrix(1 0 0 -1 50.5 25.5)"/></clipPath><clipPath id="clip6_780_2415"><rect width="17" height="25" fill="white" transform="translate(75.5 0.5)"/></clipPath><clipPath id="clip7_780_2415"><rect width="17" height="25" fill="white" transform="matrix(1 0 0 -1 75.5 25.5)"/></clipPath><clipPath id="clip8_780_2415"><rect width="17" height="25" fill="white" transform="translate(100.5 0.5)"/></clipPath><clipPath id="clip9_780_2415"><rect width="17" height="25" fill="white" transform="matrix(1 0 0 -1 100.5 25.5)"/></clipPath><clipPath id="clip10_780_2415"><rect width="17" height="17" fill="white" transform="matrix(1 0 0 -1 0.5 21.5)"/></clipPath><clipPath id="clip11_780_2415"><rect width="17" height="17" fill="white" transform="matrix(1 0 0 -1 25.5 21.5)"/></clipPath><clipPath id="clip12_780_2415"><rect width="17" height="17" fill="white" transform="matrix(1 0 0 -1 50.5 21.5)"/></clipPath><clipPath id="clip13_780_2415"><rect width="17" height="17" fill="white" transform="matrix(1 0 0 -1 75.5 21.5)"/></clipPath><clipPath id="clip14_780_2415"><rect width="17" height="17" fill="white" transform="matrix(1 0 0 -1 100.5 21.5)"/></clipPath></defs>
    </svg>`,
  arrowLine: /*html*/ `
    <svg xmlns="http://www.w3.org/2000/svg" width="56" height="66" viewBox="0 0 56 66" fill="none">
      <path d="M11.9486 11.4523C11.4249 11.3972 10.9114 11.8115 10.8018 12.3778C10.6922 12.944 11.028 13.4477 11.5517 13.5028L11.9486 11.4523ZM35.8509 24.4004L35.0505 25.0703L35.8509 24.4004ZM31.3141 57.1989C31.2788 57.7672 31.683 58.2081 32.217 58.1835L40.9185 57.7828C41.4525 57.7582 41.914 57.2775 41.9493 56.7091C41.9846 56.1408 41.5804 55.6999 41.0464 55.7245L33.3117 56.0807L33.8234 47.8474C33.8587 47.2791 33.4544 46.8382 32.9205 46.8628C32.3865 46.8874 31.925 47.3681 31.8897 47.9365L31.3141 57.1989ZM34.973 55.4077C35.3202 54.9371 35.2715 54.2964 34.8642 53.9768C34.457 53.6571 33.8454 53.7795 33.4982 54.2502L34.973 55.4077ZM36.3917 49.1994C36.158 49.7353 36.3588 50.3246 36.8402 50.5158C37.3216 50.7069 37.9013 50.4275 38.135 49.8916L36.3917 49.1994ZM40.0527 43.901C40.1729 43.336 39.8475 42.8241 39.326 42.7576C38.8045 42.6911 38.2844 43.0953 38.1643 43.6603L40.0527 43.901ZM38.7883 37.9676C38.7848 38.5335 39.2157 38.945 39.7509 38.8866C40.286 38.8283 40.7226 38.3222 40.7261 37.7563L38.7883 37.9676ZM40.1053 31.7459C39.9865 31.2083 39.4672 30.9233 38.9454 31.1094C38.4236 31.2955 38.097 31.8822 38.2158 32.4198L40.1053 31.7459ZM36.4088 27.3358C36.6517 27.8116 37.2352 27.9444 37.712 27.6324C38.1889 27.3204 38.3785 26.6818 38.1356 26.2061L36.4088 27.3358ZM34.414 20.8903C34.0663 20.5007 33.4547 20.521 33.0479 20.9356C32.6411 21.3502 32.5932 22.0021 32.9409 22.3917L34.414 20.8903ZM27.8416 18.0695C28.2801 18.3428 28.8843 18.1599 29.191 17.6609C29.4977 17.1619 29.3909 16.5359 28.9524 16.2626L27.8416 18.0695ZM22.4437 13.3571C21.9465 13.2055 21.383 13.5272 21.185 14.0756C20.9871 14.6239 21.2296 15.1913 21.7268 15.3429L22.4437 13.3571ZM15.0162 13.9236C15.5361 13.9975 16.0604 13.6 16.1873 13.0359C16.3142 12.4718 15.9957 11.9547 15.4758 11.8808L15.0162 13.9236ZM32.9194 57.8506C33.6499 57.0897 34.3354 56.2722 34.973 55.4077L33.4982 54.2502C32.919 55.0354 32.2993 55.774 31.6425 56.4581L32.9194 57.8506ZM38.135 49.8916C38.968 47.9816 39.614 45.9646 40.0527 43.901L38.1643 43.6603C37.7576 45.5734 37.1596 47.4387 36.3917 49.1994L38.135 49.8916ZM40.7261 37.7563C40.7386 35.7275 40.5386 33.7057 40.1053 31.7459L38.2158 32.4198C38.6146 34.2237 38.7998 36.0897 38.7883 37.9676L40.7261 37.7563ZM38.1356 26.2061C37.6995 25.3518 37.2054 24.5246 36.6513 23.7305L35.0505 25.0703C35.5575 25.7968 36.0096 26.5538 36.4088 27.3358L38.1356 26.2061ZM36.6513 23.7305C35.9304 22.6974 35.1844 21.7534 34.414 20.8903L32.9409 22.3917C33.6641 23.2019 34.3676 24.0917 35.0505 25.0703L36.6513 23.7305ZM28.9524 16.2626C26.8893 14.9768 24.7139 14.0491 22.4437 13.3571L21.7268 15.3429C23.8814 15.9997 25.9202 16.8721 27.8416 18.0695L28.9524 16.2626ZM15.4758 11.8808C14.3183 11.7164 13.1417 11.5777 11.9486 11.4523L11.5517 13.5028C12.7311 13.6269 13.8856 13.763 15.0162 13.9236L15.4758 11.8808Z" fill="url(#paint0_linear_780_2470)"/>
      <path d="M31.3097 57.2004C31.2744 57.7687 31.6786 58.2096 32.2126 58.185L40.9141 57.7843C41.4481 57.7597 41.9096 57.279 41.9449 56.7106C41.9802 56.1423 41.576 55.7014 41.042 55.726L33.3073 56.0822L33.8189 47.8489C33.8543 47.2806 33.45 46.8397 32.916 46.8643C32.3821 46.8889 31.9206 47.3696 31.8853 47.938L31.3097 57.2004ZM39.1673 47.1714C39.3488 46.6183 39.0878 46.0618 38.5844 45.9284C38.081 45.795 37.5257 46.1352 37.3443 46.6882L39.1673 47.1714ZM37.3443 46.6882C36.1146 50.4352 34.1495 53.8437 31.6381 56.4596L32.915 57.8521C35.7037 54.9473 37.8409 51.2131 39.1673 47.1714L37.3443 46.6882Z" fill="#B5A6F2"/>
      <defs>
        <linearGradient id="paint0_linear_780_2470" x1="39.4242" y1="42.9809" x2="23.1884" y2="20.0847" gradientUnits="userSpaceOnUse">
          <stop stop-color="#977EFE"/>
          <stop offset="1" stop-color="#6845F4" stop-opacity="0.2"/>
        </linearGradient>
      </defs>
    </svg>
  `,
  star: /*html*/ `
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
      <path d="M16 6.28095L3.05597 15.2833L4.94442 9.71952L0 6.28095H6.11155L8 0.716797L9.88844 6.28095H16ZM8.00047 11.8451L11.5356 11.1332L12.9441 15.2833L8.00047 11.8451Z" fill="#00B67A"/>
    </svg>
  `,
};

const arrTooltipTable = {
  "money back guarantee": [`<p class="tooltip_txt">Work with Treble for 45 days. If you’re not fully satisfied, we’ll refund your entire order.</p>`],
  "tinnitus relief bundle": [
    `<div class="bundle_tooltip_wrapp">
        <div class="bundle_tooltip_slider">
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-7.png" alt="" />
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-10.png" alt="" />
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-14.png" alt="" />
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-11.png" alt="" />
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-6.png" alt="" />
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-8.png" alt="" />
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-9.png" alt="" />
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-12.png" alt="" />
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-13.png" alt="" />
          <img src="https://treblehealth.com/wp-content/uploads/2023/06/Frame-15.png" alt="" />
        </div>
        <ul class="bundle_tooltip_list">
          <li><p>Pair of Treble Maskers</p></li>
          <li><p>Sleep headband for day and night relief</p></li>
          <li><p>Sound Oasis Tinnitus Sound Machine</p></li>
          <li><p>Five private sessions (two FREE)</p></li>
          <li><p>Six group sessions</p></li>
          <li><p>Priority email and text for 3 months</p></li>
          <li><p>Guided breathing and relaxation audio course</p></li>
        </ul>
    </div>`,
  ],
};

const mainStyle = /*html */ `
<style>
  [data-elementor-type="header"],
  main .page-content{
    display: none;
  }
  .container_var {
    max-width: 1136px;
    width: 90%;
    margin: 0 auto;
  }
  .new_main p{
    font-family: "Plus Jakarta Sans", sans-serif !important;
    color: #2E168D;
    font-size: 16px;
    font-weight: 400;
    line-height: 24px;
    margin: 0;
  }
  .txt_underline{
    text-decoration-line: underline;
  }
  h2.second_title{
    color: #2E168D;
    font-family: "Plus Jakarta Sans", sans-serif !important;
    font-size: 36px;
    font-weight: 800;
    line-height: 42px;
    margin: 0;
  }
  h3.third_title{
    color: #2E168D;
    font-family: "Plus Jakarta Sans", sans-serif !important;
    font-size: 20px;
    font-weight: 800;
    line-height: 28px;
    margin: 0;
  }
  h3.fourth_title{
    color: #2E168D;
    font-family: "Plus Jakarta Sans", sans-serif !important;
    font-size: 18px;
    font-weight: 800;
    line-height: 32px;
    margin: 0;
  }
  button.call_your_free_btn{
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 56px;
    color: #fff !important;
    font-family: "Plus Jakarta Sans", sans-serif !important;
    font-size: 18px;
    font-weight: 700;
    line-height: 24px;
    margin: 0 auto;
    border-radius: 5px;
    border: none !important;
    background: #FF331F !important;
    cursor: pointer;
    outline: none !important;
    padding: 0;
  }
  .tippy-tooltip{
    border-radius: 8px;
    background: #FFF;
    box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.12);
  }
  .tippy-content{
    padding: 16px;
  }
  .tippy-tooltip[data-placement^=top]>.tippy-arrow {
    border-top-color: #FFF;
  }
  .tippy-tooltip[data-placement^=bottom]>.tippy-arrow {
    border-bottom-color: #FFF;
  }
  .mob_var{
    display: none;
  }
  @media (max-width: 768px) {
    .desktop_var{
      display: none;
    }
    .mob_var{
      display: block;
    }
    h2.second_title{
      font-size: 28px;
      line-height: 36px;
    }
    .new_main{
      padding-top: 64px;
    }
  }
</style>
`;

$el("head").insertAdjacentHTML("beforeend", mainStyle);

class ImprovePage {
  constructor(level, disclaimerDates, reliefDate, levelImg, currentMonth, reliefMonth) {
    this.level = level;
    this.disclaimerDates = disclaimerDates;
    this.reliefDate = reliefDate;
    this.levelImg = levelImg;
    this.currentMonth = currentMonth;
    this.reliefMonth = reliefMonth;

    this.init();
  }

  onRenderHtml(selectorStart, place, selectorNew, newHtml) {
    if (!$el(selectorNew) && $el(selectorStart)) {
      $el(selectorStart).insertAdjacentHTML(place, newHtml);
    }
  }

  onRenderTooltip() {
    for (let key in arrTooltipTable) {
      $$el("[data-title]").forEach((el) => {
        let title = el.getAttribute("data-title");

        if (key === title) {
          el.setAttribute("data-tooltip", arrTooltipTable[key][0]);
        }
      });
    }
  }

  initTooltip() {
    let tippyRun = setInterval(() => {
      if (typeof tippy === "function" && $$el("[data-tooltip]")) {
        clearInterval(tippyRun);

        $$el("[data-tooltip]").forEach((el) => {
          tippy(el, {
            content: el.getAttribute("data-tooltip"),
            trigger: "click",
            placement: "top",
            interactive: true,
            onShow(instance) {},
            onTrigger(e) {},
          });
          setTimeout(() => {
            this.initSlickSlider();
          }, 700);
        });
      }
    }, 500);
  }

  initSlickSlider() {
    let slickInterval = setInterval(() => {
      if (typeof jQuery === "function" && typeof jQuery(".bundle_tooltip_slider").slick === "function" && $el(".bundle_tooltip_slider")) {
        clearInterval(slickInterval);

        //  slider
        let slider = jQuery(".bundle_tooltip_slider").slick({
          dots: true,
          infinite: true,
          arrows: false,
          slidesToShow: 3,
          slidesToScroll: 3,
          autoplay: true,
          autoplaySpeed: 3000,
        });
        slider.on("init", function () {
          if (!$el(".bundle_tooltip_slider").classList.contains("is_load")) {
            $el(".bundle_tooltip_slider").classList.add("is_load");
          }
        });
        slider.on("afterChange", function () {});
      }
    }, 500);
  }

  initializeClock(timeValue, selectorValue) {
    let timer = 0.1;
    let amountTime = timer * 60;

    function calculateTime() {
      const countdown = $el(selectorValue);

      let minutes = Math.floor(amountTime / 60);
      let seconds = amountTime % 60;

      if (seconds < 10) {
        seconds = "0" + seconds;
      }

      if (minutes < 10) {
        minutes = "0" + minutes;
      }

      countdown.textContent = `${minutes}:${seconds}`;
      amountTime--;

      if (amountTime < 0) {
        stopTimer();
        amountTime = 0;
      }

      function stopTimer() {
        clearInterval();
      }
    }

    function startTimer(timeValue) {
      amountTime = timeValue * 60;
      setInterval(calculateTime, 1000);
    }

    startTimer(timeValue);
  }

  initStickyHeader() {
    if ($el(".new_main") && $el(".new_header.sticky_var")) {
      let element = $el(".new_header.sticky_var");
      const elemClose = $el("#provenSuccess");
      // if (window.innerWidth <= 768) {
      //   window.addEventListener('scroll', () => {
      //     const options = {
      //       root: null,
      //       threshold: 1
      //     }
      //     let containerHint = document.querySelector('.calendar_body.no_sticky')
      //     let observer = new IntersectionObserver(entries => {
      //       entries.forEach(i => {
      //         if (i.isIntersecting) {
      //           element.classList.remove('is_intersecting')
      //         } else {
      //           element.classList.add('is_intersecting')
      //         }

      //         observer.unobserve(i.target)
      //       })

      //       observer.disconnect()
      //     })

      //     observer.observe(containerHint, options)
      //   })
      // }

      function visible(target) {
        if (target.getBoundingClientRect().bottom < 0) {
          element.classList.add("is_fixed");
        } else {
          if (element.classList.contains("is_fixed")) {
            element.classList.remove("is_fixed");
          }
        }
      }
      window.addEventListener("scroll", function () {
        visible(elemClose);
      });
      visible(elemClose);
    }
  }

  initChartJs() {}
  init() {
    const trustScoreStarsBlock = /*html */ `
    <style>
        /*trust_score_wrapp */
      .trust_score_wrapp{
        display: flex;
        align-items: center;
        justify-content: flex-start;
        width: max-content;
        cursor: pointer;
        gap: 12px;
      }
      .trust_score_wrapp > img{
        max-width: 127px;
        width: 100%;
      }
      .trust_score_wrapp > div {
        display: flex;
        align-items: center;
        justify-content: flex-start;
      }
      .trust_score_wrapp p {
        font-size: 14px;
        line-height: 20px;
        margin: 0 4px 0 0;
      }
      p.reviews_mark{
        font-weight: 600;
        margin: 0 8px 0 2px;
      }
      p.reviews_count{
        width: max-content;
        text-decoration: underline;
        margin: 0;
      }
      @media (max-width: 768px) {
        #trustScoreStarsMob{
          padding: 16px 0 0;
        }
        #trustScoreStarsMob .trust_score_wrapp{
          border-radius: 5px;
          background: #F9F9FA;
          padding: 6px 12px;
          gap: 8px;
        }
        #trustScoreStarsMob .trust_score_wrapp p{
          color: #0A0A0A;
        }
        /* new_header sticky_var*/
        .new_header.sticky_var .trust_score_wrapp{
          align-items: flex-start;
          flex-direction: column;
          gap: 4px;
        }
        .new_header.sticky_var .trust_score_wrapp p{
          font-size: 13px;
          margin: 0 2px 0 0;
        }
        .new_header.sticky_var .trust_score_wrapp svg path{
          fill: #2E168D;
        }
        .new_header.sticky_var .call_your_free_btn{
          max-width: 132px;
        }
      }
    </style>
    <div class="trust_score_wrapp">
      <img class="trust_score_stars" src="${git}/treblehealth/img/trust_score_stars.svg" alt="stars" />
      <div>
        <p class="reviews_txt">TrustScore</p>
        ${svgObj.star}
        <p class="reviews_mark">4.9</p>
        <p class="reviews_count">
          (<span><b>432</b> reviews</span>)
        </p>
      </div>
    </div>
    `;
    const newheader = /*html */ `
    <div class="new_header">
      <style>
        .new_header{
          background: #EEEBFB;
          padding: 16px 0;
          transition: all 0.5s ease;
        }
        .new_header .container_var{
          max-width: 1280px;
        }
        .new_header_wrapp{
          display: flex;
          align-items: center;
          justify-content: space-between;
        }
        .new_header_btn_wrapp{
          width: 50%;
          display: flex;
          gap: 38px;
          align-items: center;
          justify-content: flex-end;
        }
        .new_header_btn_wrapp .call_your_free_btn{
          max-width: 156px;
          height: 48px;
          font-size: 14px;
          margin: 0;
        }
        .new_header_btn_wrapp > p{
          font-size: 16px;
          font-weight: 500;
        }
        #countdown{
          font-weight: 700;
        }
        @media (max-width: 768px) {
          .new_header:not(.sticky_var){
            padding: 8px 0;
            position: fixed;
            left: 0;
            right: 0;
            top: 0;
          }
          .new_header_btn_wrapp {
            width: 100%;
            gap: 34px;
          }
          .new_header_btn_wrapp > p {
            font-size: 14px;
            line-height: 20px;
          }
        }
      </style>
      <div class="container_var">
        <div class="new_header_wrapp">
          <div class="new_header_btn_wrapp">
            <p>Your spot is reserved for: <span id="countdown"></span></p>
            <button class="call_your_free_btn">Book a Free Call</button>
          </div>
        </div>
      </div>
    </div>
    <div class="new_header sticky_var">
      <style>
        .new_header.sticky_var{
          padding: 20px 0;
        }
        .new_header.sticky_var.is_fixed{
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          z-index: 1;
          transform: translateY(0);
          animation: ani  0.5s ease;
        }
        @keyframes ani {
          0% {
            transform: translateY(100%);
          }
          100% {
            transform: translateY(0);
          }
        }
      </style>
      <div class="container_var">
        <div class="new_header_wrapp">
          <div class="new_header_btn_wrapp">
            <button class="call_your_free_btn">Book a Free Call</button>
          </div>
        </div>
      </div>
    </div>
    `;
    const heroSection = /*html */ `
    <section id="hero">
      <style>
        #hero{
          padding: 60px 0 78px;
        }
        .new_header.is_fixed + #hero{
          padding-top: 140px;
        }
        h1.hero_title{
          font-family: "Plus Jakarta Sans", sans-serif !important;
          color: #2E168D;
          text-align: center;
          font-size: 55px;
          font-weight: 400;
          line-height: 65px;
          margin: 0 0 8px;
        }
        .hero_wrapp{
          width: 100%;
          max-width: 675px;
          margin: 0 auto;
        }
        h1.hero_title b{
          font-weight: 800;
          text-transform: capitalize;
        }
        #hero .hero_txt{
          text-align: center;
          line-height: 25px;
          max-width: 571px;
          margin: 0 auto;
        }
        .chart_wrapp{
          margin: 32px 0 0;
        }
        .chart_img_wrapp{
          margin-bottom: 24px;
        }
        #hero .chart_txt{
          color: #636A85;
          line-height: 20px;
        }
        @media (max-width: 768px) {
          #hero {
            padding: 24px 0 15px;
          }
          .chart_wrapp{
            margin: 0;
          }
          .chart_img_wrapp{
            margin: 35px 0 20px;
          }
          h1.hero_title{
            text-transform: lowercase;
            font-size: 28px;
            line-height: 36px;
            margin: 8px 0;
          }
          #hero .chart_txt{
            font-size: 13px;
            line-height: 16px;
            text-align: center;
          }
          #hero .hero_txt b{
            display: block;
          }
        }
      </style>
      <div class="container_var">
        <div class="hero_wrapp">
          <p class="hero_txt mob_var">Based on your answers,</p>
          <h1 class="hero_title">Your tinnitus is <b>${this.level}</b></h1>
          <p class="hero_txt mob_var">and you can experience relief from tinnitus <b>by ${this.reliefDate}*</b> <span class="txt_underline"><b>with Tinnitus Relief Bundle</b></p>
          <p class="hero_txt desktop_var">
            Based on your answers, you can experience relief from tinnitus <b>by ${this.reliefDate}*</b> <span class="txt_underline"><b>with Tinnitus Relief Bundle</b></span>
          </p>
          <div class="chart_wrapp">
            <div class="chart_img_wrapp">
              <img src="${this.levelImg}" alt="chart">
            </div>
            <p class="chart_txt">*based on Treble Health users like you, <br class="mob_var"/> we predict you’ll find relief from tinnitus in <span>${this.disclaimerDates}</span> days</p>
          </div>
        </div>
      </div>
    </section>
    `;
    const provenSuccessSection = /*html */ `
    <section id="provenSuccess">
      <style>
        #provenSuccess{
          background: #EEEBFB;
          padding: 24px 0 32px;
        }
        .proven_success_wrapp{
          display: flex;
          align-items: center;
          justify-content: center;
          max-width: 800px;
          width: 100%;
          margin: 0 auto;
          border-radius: 8px;
          background: #FFF;
          box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.12);
          padding: 20px 16px;
          gap: 20px;
        }
        .proven_success_wrapp .third_title{
          margin-bottom: 4px;
        }
        .proven_success_wrapp p{
          font-weight: 500;
        }
        @media (max-width: 768px) {
          #provenSuccess{
            padding: 24px 0;
          }
          .proven_success_wrapp{
            padding: 16px;
          }
        }
      </style>
      <div class="container_var">
        <div class="proven_success_wrapp">
          <span class="desktop_var">
            ${svgObj.ear}
          </span>
          <div>
            <h3 class="third_title">Proven Success</h3>
            <p>Over <b>85%*</b> of customers using <b>Tinnitus Relief Bundle</b> report <b>better hearing.</b></p>
          </div>
        </div>
      </div>
    </section>
    `;
    const tinnitusReliefBundleSection = /*html */ `
    <section id="tinnitusReliefBundle">
      <style>
        #tinnitusReliefBundle{
          padding: 80px 0 32px;
        }
        .tinnitus_relief_bundle_wrapp{
          max-width: 973px;
          display: flex;
          gap: 80px;
          justify-content: flex-start;
          align-items: center;
          margin: 0 auto;
        }
        .tinnitus_relief_bundle_wrapp .img_wrapp{
          max-width: 430px;
          border-radius: 30px;
        }
        .tinnitus_relief_bundle_wrapp .img_wrapp img{
          border-radius: 30px;
          width: 100%;
          height: 100%;
        }
        #tinnitusReliefBundle .second_title{
          margin-bottom: 12px;
        }
        #tinnitusReliefBundle .third_title{
          font-weight: 500;
          margin-bottom: 12px;
        }
        .tinnitus_relief_bundle_reviews{
          display: flex;
          align-items: center;
          justify-content: flex-start;
          margin: 0 0 24px;
          gap: 16px;
        }
        .tinnitus_relief_bundle_reviews span{
          color: #2E168D;
          font-family: "Plus Jakarta Sans", sans-serif !important;
          font-size: 12px;
          font-weight: 500;
          line-height: 15px;
          margin: 0;
        }
        #tinnitusReliefBundle .tinnitus_relief_bundle_txt{
          font-weight: 500;
          display: flex;
          align-items: center;
          justify-content: flex-start;
          gap: 6px;
          margin: 0 0 24px;
        }
        .tinnitus_relief_bundle_descr h3.fourth_title{
          line-height: 26px;
          margin-bottom: 16px;
        }
        .tinnitus_relief_bundle_descr ul,
        .bundle_tooltip_list{
          list-style: none;
          padding: 0;
          margin: 0;
        }
        .bundle_tooltip_list {
          margin-top: 16px;
        }
        .tinnitus_relief_bundle_descr ul li,
        .bundle_tooltip_list li{
          position: relative;
          padding-left: 32px;
        }
        .tinnitus_relief_bundle_descr ul li::before,
        .bundle_tooltip_list li::before{
          position: absolute;
          content: "";
          width: 20px;
          height: 20px;
          background: url(${git}/treblehealth/img/check_icon.svg) center no-repeat;
          background-size: contain;
          border-radius: 0;
          top: 3px;
          left: 0;
        }
        .tinnitus_relief_bundle_descr ul li + li,
        .bundle_tooltip_list li + li{
          margin-top: 8px;
        }
        .bundle_tooltip_list li p{
          font-size: 14px;
        }
        .tinnitus_relief_bundle_descr ul li p{
          line-height: 25px;
        }
        .bundle_tooltip_slider{
          display: none;
         transition: all 0.5s ease 0.5s;
        }
        .is_load{
          display: block;
        }
        .bundle_tooltip_slider .slick-slide{
          margin: 0 2px;
        }
        .bundle_tooltip_slider img{
          height: 100%;
          width: 100%;
          border-radius: 8px;
          object-fit: cover;
        }
        .bundle_tooltip_slider .slick-dots {
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 16px auto 0;
          list-style: none;
          padding: 0;
        }
        .bundle_tooltip_slider .slick-dots li button {
          font-size: 0;
          line-height: 0;
          display: block;
          width: 10px;
          height: 10px;
          cursor: pointer;
          color: transparent;
          outline: none;
          background: #EFECFB;
          border-radius: 5px;
          border: 1px solid #2E168D;
          margin: 0 6px;
          padding: 0;
        }
        .bundle_tooltip_slider .slick-dots li.slick-active button {
          background: #2E168D;
        }
        @media (max-width: 768px) {
          #tinnitusReliefBundle {
            padding: 16px 0 24px;
          }
          .tinnitus_relief_bundle_wrapp {
            gap: 12px;
            flex-direction: column;
          }
          #tinnitusReliefBundle .second_title{
            text-align: center;
          }
          #tinnitusReliefBundle .third_title{
            font-size: 16px;
            line-height: 24px;
          }
          .tinnitus_relief_bundle_reviews {
            justify-content: center;
            margin: 0 0 12px;
          }
          .tinnitus_relief_bundle_wrapp .img_wrapp {
            max-width: 335px;
          }
          #tinnitusReliefBundle .tinnitus_relief_bundle_txt {
            justify-content: center;
            gap: 4px;
          }
        }
      </style>
      <div class="container_var">
        <div class="tinnitus_relief_bundle_wrapp">
          <div class="mob_var">
            <h2 class="second_title">Tinnitus Relief Bundle</h2>
            <h3 class="third_title">For individuals with <b><span>${this.level}</span> tinnitus.</b></h3>
            <div class="tinnitus_relief_bundle_reviews">
              ${svgObj.starReview}
              <span>430+ reviews</span>
            </div>
          </div>
          <div class="img_wrapp">
            <img src="https://treblehealth.com/wp-content/uploads/2022/12/Wordpress-images-3.png" alt="Tinnitus Relief Bundle" />
          </div>
          <div>
            <div class="desktop_var">
              <h2 class="second_title">Tinnitus Relief Bundle</h2>
              <h3 class="third_title">For individuals with <b><span>${this.level}</span> tinnitus.</b></h3>
              <div class="tinnitus_relief_bundle_reviews">
                ${svgObj.starReview}
                <span>430+ reviews</span>
              </div>
            </div>
            <p class="tinnitus_relief_bundle_txt">
               What’s in the bundle?
               <span data-title="tinnitus relief bundle">
                ${svgObj.tooltip}
               </span>
            </p>
            <div class="tinnitus_relief_bundle_descr">
              <h3 class="fourth_title">What you’ll get:</h3>
              <ul class="">
                <li class=""><p>Enhanced focus and attention during the day</p></li>
                <li class=""><p>Tools to fall asleep at night</p></li>
                <li class=""><p>Peace of mind and calm</p></li>
                <li class=""><p>Sound therapy devices for maximum relief.</p></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>
    `;
    const backGuaranteeSection = /*html */ `
    <section id="backGuarantee">
      <style>
        #backGuarantee{
          padding: 0 0 8px;
        }
        .back_guarantee_wrapp{
          text-align: center;
          max-width: 520px;
          margin: 0 auto;
        }
        .back_guarantee_wrapp .fourth_title{
          position: relative;
          margin-bottom: 20px;
        }
        .back_guarantee_wrapp .call_your_free_btn{
          max-width: 400px;
        }
        .back_guarantee_descr{
          display: flex;
          align-items: center;
          justify-content: center;
          max-width: 400px;
          border-radius: 8px;
          background: #FFF;
          box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.11);
          margin: 16px auto 0;
          padding: 8px 20px;
        }
        .back_guarantee_wrapp p{
          font-size: 14px;
          font-weight: 800;
          margin: 0 8px 0 16px;
        }
        .back_guarantee_wrapp .fourth_title::after{
          position: absolute;
          content: "";
          width: 41px;
          height: 57px;
          background: url(${git}/treblehealth/img/arrow_icon_mob.svg) center no-repeat;
          background-size: contain;
          bottom: -36px;
          right: 0;
          transform: rotate(24deg);
        }
        .back_guarantee_wrapp .tippy-popper {
          max-width: 229px !important;
        }
        .back_guarantee_wrapp .tooltip_txt{
          font-size: 13px;
          font-weight: 400;
          line-height: 18px;
          margin: 0;
          text-align: left;
        }
        @media (max-width: 768px) {
          #backGuarantee{
            background: #EEEBFB;
            padding: 24px 0;
          }
          .back_guarantee_wrapp .fourth_title{
            max-width: 280px;
            line-height: 26px;
            margin-bottom: 24px;
            text-align: start;
          }
          .back_guarantee_wrapp p{
            margin: 0 4px 0 12px;
          }
          .back_guarantee_wrapp .fourth_title::after {
            bottom: -14px;
            right: -60px;
            transform: unset;
          }
        }
      </style>
      <div class="container_var">
        <div class="back_guarantee_wrapp">
          <h3 class="fourth_title">Book a FREE Tinnitus Relief Discovery Call for personalized recommendations from a Doctor of Audiology</h3>
          <button class="call_your_free_btn">Book a FREE Discovery Call</button>
          <div class="back_guarantee_descr">
            ${svgObj.guarantee}
            <p>45 day money back guarantee</p>
            <span data-title="money back guarantee">
              ${svgObj.tooltip}
            </span>
          </div>
        </div>
      </div>
    </section>
    `;

    // new main
    this.onRenderHtml("#content", "afterbegin", ".new_main", `<div class="new_main"></div>`);
    //new header
    this.onRenderHtml(".new_main", "afterbegin", ".new_header", newheader);
    //new header ->>> trustScoreStarsBlock
    if (window.innerWidth > 768) {
      this.onRenderHtml(".new_header:not(.sticky_var) .new_header_wrapp", "afterbegin", ".trust_score_wrapp", trustScoreStarsBlock);
    }
    //new header sticky_var ->>> trustScoreStarsBlock
    this.onRenderHtml(".new_header.sticky_var .new_header_wrapp", "afterbegin", ".new_header.sticky_var .trust_score_wrapp", trustScoreStarsBlock);
    // hero
    this.onRenderHtml(".new_header", "afterend", "#hero", heroSection);
    if (window.innerWidth <= 768) {
      this.onRenderHtml("#hero", "beforebegin", "#trustScoreStarsMob", `<section id="trustScoreStarsMob"><div class="container_var">${trustScoreStarsBlock}</div></section>`);
    }
    // provenSuccess
    this.onRenderHtml("#hero", "afterend", "#provenSuccess", provenSuccessSection);
    // tinnitusReliefBundle
    this.onRenderHtml("#provenSuccess", "afterend", "#tinnitusReliefBundle", tinnitusReliefBundleSection);
    // backGuarantee
    this.onRenderHtml("#tinnitusReliefBundle", "afterend", "#backGuarantee", backGuaranteeSection);

    this.onRenderTooltip();
    this.initTooltip();
    this.initializeClock(15, `#countdown`);
    this.initStickyHeader();
    this.initChartJs();

    console.log(this.level, this.disclaimerDates, this.reliefDate);
  }
}

new ImprovePage(level, disclaimerDates, reliefDate, levelImg, currentMonth, reliefMonth);
